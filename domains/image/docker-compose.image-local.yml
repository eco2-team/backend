services:
  api:
    build:
      context: ../..
      dockerfile: domains/image/Dockerfile
    container_name: image-local-api
    environment:
      IMAGE_AWS_REGION: ${IMAGE_AWS_REGION:-ap-northeast-2}
      IMAGE_S3_BUCKET: ${IMAGE_S3_BUCKET:-dev-sesacthon-dev-images}
      IMAGE_CDN_DOMAIN: ${IMAGE_CDN_DOMAIN:-https://images.dev.growbin.app}
      IMAGE_PRESIGN_EXPIRES: ${IMAGE_PRESIGN_EXPIRES:-900}
      AWS_ACCESS_KEY_ID: ${AWS_ACCESS_KEY_ID}
      AWS_SECRET_ACCESS_KEY: ${AWS_SECRET_ACCESS_KEY}
      AWS_SESSION_TOKEN: ${AWS_SESSION_TOKEN:-}
    ports:
    - 8020:8000
    command: [uvicorn, domains.image.main:app, --host, 0.0.0.0, --port, '8000']
