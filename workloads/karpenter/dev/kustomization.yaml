apiVersion: kustomize.config.k8s.io/v1beta1
kind: Kustomization

resources:
- ../base

# Dev-specific patches
patches:
  # EC2NodeClass - dev instance profile
- target:
    kind: EC2NodeClass
    name: default
  patch: |
    - op: replace
      path: /spec/instanceProfile
      value: dev-karpenter-node
    - op: replace
      path: /spec/tags/Environment
      value: dev

  # NodePool - dev limits (conservative)
- target:
    kind: NodePool
    name: worker-scalable
  patch: |
    - op: replace
      path: /spec/limits/cpu
      value: 10
    - op: replace
      path: /spec/limits/memory
      value: 20Gi
