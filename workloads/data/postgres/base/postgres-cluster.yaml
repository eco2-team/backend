apiVersion: acid.zalan.do/v1
kind: postgresql
metadata:
  name: postgres-main
  namespace: postgres
  labels:
    app.kubernetes.io/name: postgresql
    tier: data
spec:
  teamId: platform
  users:
    sesacthon: []
  databases:
    sesacthon: sesacthon
  postgresql:
    version: "15"
  volume:
    storageClass: gp3
  tolerations:
    - key: node-role.kubernetes.io/infrastructure
      operator: Equal
      value: "true"
      effect: NoSchedule
  nodeAffinity:
    requiredDuringSchedulingIgnoredDuringExecution:
      nodeSelectorTerms:
        - matchExpressions:
            - key: node-role.kubernetes.io/infrastructure
              operator: In
              values:
                - postgresql

