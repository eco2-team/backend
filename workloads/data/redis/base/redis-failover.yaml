apiVersion: databases.spotahome.com/v1
kind: RedisFailover
metadata:
  name: redis-main
  namespace: redis
  labels:
    app.kubernetes.io/name: redis
    tier: data
spec:
  sentinel:
    replicas: 3
    nodeSelector:
      node-role.kubernetes.io/infrastructure: redis
    tolerations:
      - key: node-role.kubernetes.io/infrastructure
        operator: Equal
        value: "true"
        effect: NoSchedule
  redis:
    replicas: 1
    nodeSelector:
      node-role.kubernetes.io/infrastructure: redis
    tolerations:
      - key: node-role.kubernetes.io/infrastructure
        operator: Equal
        value: "true"
        effect: NoSchedule

