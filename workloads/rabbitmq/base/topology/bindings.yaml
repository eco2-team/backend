---
# RabbitMQ Bindings 정의
# Exchange → Queue 연결
---
# ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
# Scan Pipeline Bindings
# ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
apiVersion: rabbitmq.com/v1beta1
kind: Binding
metadata:
  name: scan-vision-binding
  namespace: rabbitmq
spec:
  source: scan.direct
  destination: scan.vision
  destinationType: queue
  routingKey: scan.vision
  vhost: eco2
  rabbitmqClusterReference:
    name: eco2-rabbitmq
    namespace: rabbitmq
---
apiVersion: rabbitmq.com/v1beta1
kind: Binding
metadata:
  name: scan-rule-binding
  namespace: rabbitmq
spec:
  source: scan.direct
  destination: scan.rule
  destinationType: queue
  routingKey: scan.rule
  vhost: eco2
  rabbitmqClusterReference:
    name: eco2-rabbitmq
    namespace: rabbitmq
---
apiVersion: rabbitmq.com/v1beta1
kind: Binding
metadata:
  name: scan-answer-binding
  namespace: rabbitmq
spec:
  source: scan.direct
  destination: scan.answer
  destinationType: queue
  routingKey: scan.answer
  vhost: eco2
  rabbitmqClusterReference:
    name: eco2-rabbitmq
    namespace: rabbitmq
---
# ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
# Scan Reward Binding (scan.direct → scan.reward)
# ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
apiVersion: rabbitmq.com/v1beta1
kind: Binding
metadata:
  name: scan-reward-binding
  namespace: rabbitmq
spec:
  source: scan.direct
  destination: scan.reward
  destinationType: queue
  routingKey: scan.reward
  vhost: eco2
  rabbitmqClusterReference:
    name: eco2-rabbitmq
    namespace: rabbitmq
---
# ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
# Character Match Binding (동기 응답용)
# ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
apiVersion: rabbitmq.com/v1beta1
kind: Binding
metadata:
  name: character-match-binding
  namespace: rabbitmq
spec:
  source: character.direct
  destination: character.match
  destinationType: queue
  routingKey: character.match
  vhost: eco2
  rabbitmqClusterReference:
    name: eco2-rabbitmq
    namespace: rabbitmq
---
# ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
# Character Reward Binding (fire & forget)
# ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
apiVersion: rabbitmq.com/v1beta1
kind: Binding
metadata:
  name: character-reward-binding
  namespace: rabbitmq
spec:
  source: character.direct
  destination: character.reward
  destinationType: queue
  routingKey: character.reward
  vhost: eco2
  rabbitmqClusterReference:
    name: eco2-rabbitmq
    namespace: rabbitmq
---
# ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
# Character Grant Default Binding (신규 사용자 기본 캐릭터 지급)
# ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
apiVersion: rabbitmq.com/v1beta1
kind: Binding
metadata:
  name: character-grant-default-binding
  namespace: rabbitmq
spec:
  source: character.direct
  destination: character.grant_default
  destinationType: queue
  routingKey: character.grant_default
  vhost: eco2
  rabbitmqClusterReference:
    name: eco2-rabbitmq
    namespace: rabbitmq
---
# ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
# My Reward Binding (my.direct → my.reward)
# ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
apiVersion: rabbitmq.com/v1beta1
kind: Binding
metadata:
  name: my-reward-binding
  namespace: rabbitmq
spec:
  source: my.direct
  destination: my.reward
  destinationType: queue
  routingKey: my.reward
  vhost: eco2
  rabbitmqClusterReference:
    name: eco2-rabbitmq
    namespace: rabbitmq
---
# ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
# Dead Letter Bindings
# ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
apiVersion: rabbitmq.com/v1beta1
kind: Binding
metadata:
  name: dlq-scan-vision-binding
  namespace: rabbitmq
spec:
  source: dlx
  destination: dlq.scan.vision
  destinationType: queue
  routingKey: dlq.scan.vision
  vhost: eco2
  rabbitmqClusterReference:
    name: eco2-rabbitmq
    namespace: rabbitmq
---
apiVersion: rabbitmq.com/v1beta1
kind: Binding
metadata:
  name: dlq-scan-rule-binding
  namespace: rabbitmq
spec:
  source: dlx
  destination: dlq.scan.rule
  destinationType: queue
  routingKey: dlq.scan.rule
  vhost: eco2
  rabbitmqClusterReference:
    name: eco2-rabbitmq
    namespace: rabbitmq
---
apiVersion: rabbitmq.com/v1beta1
kind: Binding
metadata:
  name: dlq-scan-answer-binding
  namespace: rabbitmq
spec:
  source: dlx
  destination: dlq.scan.answer
  destinationType: queue
  routingKey: dlq.scan.answer
  vhost: eco2
  rabbitmqClusterReference:
    name: eco2-rabbitmq
    namespace: rabbitmq
---
apiVersion: rabbitmq.com/v1beta1
kind: Binding
metadata:
  name: dlq-scan-reward-binding
  namespace: rabbitmq
spec:
  source: dlx
  destination: dlq.scan.reward
  destinationType: queue
  routingKey: dlq.scan.reward
  vhost: eco2
  rabbitmqClusterReference:
    name: eco2-rabbitmq
    namespace: rabbitmq
---
apiVersion: rabbitmq.com/v1beta1
kind: Binding
metadata:
  name: dlq-character-match-binding
  namespace: rabbitmq
spec:
  source: dlx
  destination: dlq.character.match
  destinationType: queue
  routingKey: dlq.character.match
  vhost: eco2
  rabbitmqClusterReference:
    name: eco2-rabbitmq
    namespace: rabbitmq
---
apiVersion: rabbitmq.com/v1beta1
kind: Binding
metadata:
  name: dlq-character-reward-binding
  namespace: rabbitmq
spec:
  source: dlx
  destination: dlq.character.reward
  destinationType: queue
  routingKey: dlq.character.reward
  vhost: eco2
  rabbitmqClusterReference:
    name: eco2-rabbitmq
    namespace: rabbitmq
---
apiVersion: rabbitmq.com/v1beta1
kind: Binding
metadata:
  name: dlq-character-grant-default-binding
  namespace: rabbitmq
spec:
  source: dlx
  destination: dlq.character.grant_default
  destinationType: queue
  routingKey: dlq.character.grant_default
  vhost: eco2
  rabbitmqClusterReference:
    name: eco2-rabbitmq
    namespace: rabbitmq
---
apiVersion: rabbitmq.com/v1beta1
kind: Binding
metadata:
  name: dlq-my-reward-binding
  namespace: rabbitmq
spec:
  source: dlx
  destination: dlq.my.reward
  destinationType: queue
  routingKey: dlq.my.reward
  vhost: eco2
  rabbitmqClusterReference:
    name: eco2-rabbitmq
    namespace: rabbitmq
---
apiVersion: rabbitmq.com/v1beta1
kind: Binding
metadata:
  name: dlq-celery-binding
  namespace: rabbitmq
spec:
  source: dlx
  destination: dlq.celery
  destinationType: queue
  routingKey: dlq.celery
  vhost: eco2
  rabbitmqClusterReference:
    name: eco2-rabbitmq
    namespace: rabbitmq
---
# ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
# Celery Default Binding
# ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
apiVersion: rabbitmq.com/v1beta1
kind: Binding
metadata:
  name: celery-default-binding
  namespace: rabbitmq
spec:
  source: celery
  destination: celery
  destinationType: queue
  routingKey: celery
  vhost: eco2
  rabbitmqClusterReference:
    name: eco2-rabbitmq
    namespace: rabbitmq
