apiVersion: kustomize.config.k8s.io/v1beta1
kind: Kustomization

namespace: rabbitmq

resources:
- ../base

commonLabels:
  env: dev

# 개발 환경: 단일 노드 (Sidecar ~128Mi 포함)
patches:
- patch: |
    - op: replace
      path: /spec/replicas
      value: 1
    - op: replace
      path: /spec/persistence/storage
      value: 10Gi
    - op: replace
      path: /spec/resources/requests/memory
      value: 1Gi
    - op: replace
      path: /spec/resources/limits/memory
      value: 2Gi
  target:
    kind: RabbitmqCluster
    name: eco2-rabbitmq
