apiVersion: external-secrets.io/v1beta1
kind: ExternalSecret
metadata:
  name: info-secret
  namespace: info
spec:
  refreshInterval: 1h
  secretStoreRef:
    kind: ClusterSecretStore
    name: aws-ssm-store
  data:
  # 네이버 검색 API (뉴스)
  - secretKey: naverClientId
    remoteRef:
      key: /sesacthon/prod/api/info/naver-client-id
  - secretKey: naverClientSecret
    remoteRef:
      key: /sesacthon/prod/api/info/naver-client-secret
  # NewsData.io API (해외 뉴스)
  - secretKey: newsDataApiKey
    remoteRef:
      key: /sesacthon/prod/api/info/newsdata-api-key
  target:
    name: info-secret
    creationPolicy: Owner
    template:
      data:
        INFO_NAVER_CLIENT_ID: '{{ .naverClientId }}'
        INFO_NAVER_CLIENT_SECRET: '{{ .naverClientSecret }}'
        INFO_NEWSDATA_API_KEY: '{{ .newsDataApiKey }}'
