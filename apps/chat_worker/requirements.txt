# apps/chat_worker/requirements.txt
# Chat Worker Dependencies

# Task Queue
taskiq>=0.11.0
taskiq-aio-pika>=0.4.0

# gRPC (Character, Location 서비스 연동)
grpcio>=1.60.0
grpcio-tools>=1.60.0

# LLM Clients (chat 패키지 의존성)
openai>=1.58.0
anthropic>=0.40.0
google-genai>=0.3.0
tiktoken>=0.8.0

# LangGraph 1.0+ (Context Compression 지원)
# Python >=3.10 필요
langgraph>=1.0.6,<2.0.0
langchain-core>=1.0.0,<2.0.0  # LangGraph 1.0과 호환
langgraph-checkpoint-postgres>=2.0.0  # PostgreSQL 체크포인터
langgraph-checkpoint-redis>=0.3.0  # Redis 체크포인터 (Fallback)

# LangSmith + OpenTelemetry 통합
# >= 0.4.25 권장 (OTEL export 안정성 개선)
# https://docs.langchain.com/langsmith/trace-with-opentelemetry
langsmith[otel]>=0.4.25,<1.0.0

# Redis
redis>=5.2.0

# Web Search
duckduckgo-search>=6.0.0
tavily-python>=0.3.0  # Optional: LLM-optimized search

# Settings
pydantic>=2.10.0
pydantic-settings>=2.6.0

# Observability (OpenTelemetry)
# SDK 1.39+ 기준 (2025-12 릴리즈)
opentelemetry-api>=1.28.0,<2.0.0
opentelemetry-sdk>=1.28.0,<2.0.0
opentelemetry-exporter-otlp-proto-http>=1.28.0,<2.0.0
opentelemetry-instrumentation-aio-pika>=0.49b0

# LLM API Instrumentation
# OpenAI: Chat Completions, Embeddings, Streaming 추적
opentelemetry-instrumentation-openai-v2>=2.0b0
# Gemini: generateContent, Streaming 추적
opentelemetry-instrumentation-google-generativeai>=0.50.0

# Prometheus Metrics
prometheus-client>=0.19.0
