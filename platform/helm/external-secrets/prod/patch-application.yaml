apiVersion: argoproj.io/v1alpha1
kind: Application
metadata:
  name: external-secrets
spec:
  project: prod
  source:
    helm:
      valuesObject:
        installCRDs: false
        tolerations:
          - key: node-role.sesacthon.io/control-plane
            operator: Exists
            effect: NoSchedule
        nodeSelector:
          node-role.sesacthon.io/control-plane: ""
        controller:
          env:
            - name: AWS_REGION
              value: ap-northeast-2
            - name: AWS_ACCESS_KEY_ID
              valueFrom:
                secretKeyRef:
                  name: aws-global-credentials
                  key: aws_access_key_id
            - name: AWS_SECRET_ACCESS_KEY
              valueFrom:
                secretKeyRef:
                  name: aws-global-credentials
                  key: aws_secret_access_key

