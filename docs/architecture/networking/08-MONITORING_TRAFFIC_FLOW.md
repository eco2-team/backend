# ëª¨ë‹ˆí„°ë§ íŠ¸ë˜í”½ íë¦„ ë° ì•„í‚¤í…ì²˜

> ë‚ ì§œ: 2025-11-04  
> ëª©ì : Prometheus + Grafana ëª¨ë‹ˆí„°ë§ ì‹œìŠ¤í…œì˜ íŠ¸ë˜í”½ íë¦„ ë° ë°ì´í„° ìˆ˜ì§‘ êµ¬ì¡° ì„¤ëª…

---

## ğŸ“‹ Pod CIDR êµ¬ì¡° (ì „ì²´)

```
Pod CIDR: 192.168.0.0/16 (Calico VXLAN)

â”œâ”€ k8s-master: 192.168.0.0/24
â”‚   â””â”€ argocd-server-xxx: 192.168.0.5
â”‚
â”œâ”€ k8s-worker-1: 192.168.1.0/24
â”‚   â””â”€ backend-api-xxx: 192.168.1.10
â”‚
â”œâ”€ k8s-worker-2: 192.168.2.0/24
â”‚   â””â”€ celery-worker-xxx: 192.168.2.15
â”‚
â”œâ”€ k8s-rabbitmq: 192.168.3.0/24
â”‚   â””â”€ rabbitmq-xxx: 192.168.3.5
â”‚
â”œâ”€ k8s-postgresql: 192.168.4.0/24
â”‚   â””â”€ postgres-0: 192.168.4.10
â”‚
â”œâ”€ k8s-redis: 192.168.5.0/24
â”‚   â””â”€ redis-xxx: 192.168.5.5
â”‚
â””â”€ k8s-monitoring: 192.168.6.0/24  â­ ëª¨ë‹ˆí„°ë§ ì „ìš© ë…¸ë“œ
    â”œâ”€ prometheus-xxx: 192.168.6.10
    â””â”€ grafana-xxx: 192.168.6.20
```

---

## ğŸ¯ ëª¨ë‹ˆí„°ë§ ì‹œìŠ¤í…œ ê°œìš”

### 1ï¸âƒ£ **ë°°ì¹˜ êµ¬ì¡°**

| ì»´í¬ë„ŒíŠ¸ | ë…¸ë“œ | Pod IP ë²”ìœ„ | ì—­í•  |
|----------|------|-------------|------|
| **Prometheus** | k8s-monitoring | 192.168.6.x | ë©”íŠ¸ë¦­ ìˆ˜ì§‘ ë° ì €ì¥ (TSDB) |
| **Grafana** | k8s-monitoring | 192.168.6.x | ë©”íŠ¸ë¦­ ì‹œê°í™” ë° ëŒ€ì‹œë³´ë“œ |
| **Alertmanager** | k8s-monitoring | 192.168.6.x | ì•Œë¦¼ ê´€ë¦¬ |
| **Node Exporter** | ëª¨ë“  ë…¸ë“œ | 192.168.x.x | ë…¸ë“œ ë©”íŠ¸ë¦­ ìˆ˜ì§‘ |
| **kube-state-metrics** | k8s-monitoring | 192.168.6.x | Kubernetes ì˜¤ë¸Œì íŠ¸ ë©”íŠ¸ë¦­ |

### 2ï¸âƒ£ **ë…¸ë“œ ì„ íƒ ì„¤ì •**

**íŒŒì¼**: `ansible/playbooks/08-monitoring.yml`

```yaml
helm install prometheus prometheus-community/kube-prometheus-stack \
  --namespace monitoring \
  --set prometheus.prometheusSpec.nodeSelector.workload=monitoring \
  --set grafana.nodeSelector.workload=monitoring \
  --set alertmanager.alertmanagerSpec.nodeSelector.workload=monitoring
```

**ê²°ê³¼**:
- Prometheus, Grafana, AlertmanagerëŠ” **k8s-monitoring ë…¸ë“œì—ë§Œ ë°°ì¹˜**
- Node ExporterëŠ” **ëª¨ë“  ë…¸ë“œì— DaemonSetìœ¼ë¡œ ë°°ì¹˜** (ë…¸ë“œë³„ ë©”íŠ¸ë¦­ ìˆ˜ì§‘)

---

## ğŸ”„ ëª¨ë‹ˆí„°ë§ ë°ì´í„° ìˆ˜ì§‘ íë¦„

### 1ï¸âƒ£ **Prometheus ë©”íŠ¸ë¦­ ìˆ˜ì§‘ (Pull ë°©ì‹)**

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                   Prometheus (k8s-monitoring)                      â”‚
â”‚   Pod IP: 192.168.6.10                                             â”‚
â”‚   Service: prometheus-kube-prometheus-prometheus.monitoring:9090   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â†“ (Pull ë°©ì‹)
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â†“                     â†“                     â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Node Metrics â”‚    â”‚ Pod Metrics  â”‚    â”‚ K8s Metrics  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
        â†“                     â†“                     â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Node         â”‚    â”‚ cAdvisor     â”‚    â”‚ kube-state-  â”‚
â”‚ Exporter     â”‚    â”‚ (Kubelet)    â”‚    â”‚ metrics      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
   (ê° ë…¸ë“œ)           (ê° ë…¸ë“œ)        (k8s-monitoring)
```

#### ğŸ” ìˆ˜ì§‘ ëŒ€ìƒ ìƒì„¸

##### A. Node Exporter (ê° ë…¸ë“œì˜ 192.168.x.x)

**DaemonSet**: ëª¨ë“  ë…¸ë“œì—ì„œ ì‹¤í–‰

```yaml
# ê° ë…¸ë“œì˜ Node Exporter Pod IP
k8s-master:      192.168.0.50
k8s-worker-1:    192.168.1.50
k8s-worker-2:    192.168.2.50
k8s-rabbitmq:    192.168.3.50
k8s-postgresql:  192.168.4.50
k8s-redis:       192.168.5.50
k8s-monitoring:  192.168.6.50
```

**ìˆ˜ì§‘ ë©”íŠ¸ë¦­**:
- CPU ì‚¬ìš©ë¥ 
- ë©”ëª¨ë¦¬ ì‚¬ìš©ë¥ 
- ë””ìŠ¤í¬ I/O
- ë„¤íŠ¸ì›Œí¬ íŠ¸ë˜í”½
- íŒŒì¼ ì‹œìŠ¤í…œ ì‚¬ìš©ëŸ‰

**Prometheus â†’ Node Exporter í†µì‹ **:
```
Prometheus (192.168.6.10)
  â†“ (Calico VXLAN Tunnel)
Node Exporter (192.168.0.50 - Master)
  â†“ HTTP GET /metrics (í¬íŠ¸ 9100)
Response: node_cpu_seconds_total{cpu="0"} 12345.67
```

---

##### B. cAdvisor (Kubelet ë‚´ì¥, ê° ë…¸ë“œ)

**ìœ„ì¹˜**: ê° ë…¸ë“œì˜ Kubeletì— ë‚´ì¥

```yaml
# ê° ë…¸ë“œì˜ Kubelet (cAdvisor í¬í•¨)
k8s-master:10250/metrics/cadvisor
k8s-worker-1:10250/metrics/cadvisor
k8s-worker-2:10250/metrics/cadvisor
k8s-rabbitmq:10250/metrics/cadvisor
k8s-postgresql:10250/metrics/cadvisor
k8s-redis:10250/metrics/cadvisor
k8s-monitoring:10250/metrics/cadvisor
```

**ìˆ˜ì§‘ ë©”íŠ¸ë¦­**:
- **ì»¨í…Œì´ë„ˆë³„** CPU/Memory ì‚¬ìš©ëŸ‰
- **Podë³„** ë¦¬ì†ŒìŠ¤ ì‚¬ìš©ëŸ‰
- ë„¤íŠ¸ì›Œí¬ I/O (Pod ë‹¨ìœ„)
- íŒŒì¼ ì‹œìŠ¤í…œ ì‚¬ìš©ëŸ‰ (Pod ë‹¨ìœ„)

**Prometheus â†’ cAdvisor í†µì‹ **:
```
Prometheus (192.168.6.10)
  â†“ (Kubernetes API Server ê²½ìœ )
Kubelet (Node IP:10250/metrics/cadvisor)
  â†“ HTTPS (Bearer Token ì¸ì¦)
Response: container_cpu_usage_seconds_total{pod="rabbitmq-xxx"} 45.32
```

---

##### C. kube-state-metrics (k8s-monitoring ë…¸ë“œ)

**Pod IP**: `192.168.6.30`

**ìˆ˜ì§‘ ë©”íŠ¸ë¦­**:
- Deployment/StatefulSet ìƒíƒœ
- Pod ìƒíƒœ (Running/Pending/Failed)
- Node ìƒíƒœ (Ready/NotReady)
- PVC ìƒíƒœ
- ConfigMap/Secret ê°œìˆ˜

**Prometheus â†’ kube-state-metrics í†µì‹ **:
```
Prometheus (192.168.6.10)
  â†“ (ê°™ì€ ë…¸ë“œ, Calico VXLAN)
kube-state-metrics (192.168.6.30)
  â†“ HTTP GET /metrics (í¬íŠ¸ 8080)
Response: kube_pod_status_phase{pod="rabbitmq-xxx",phase="Running"} 1
```

---

### 2ï¸âƒ£ **Grafana ì™¸ë¶€ ì ‘ê·¼ (ì‚¬ìš©ì)**

#### ê²½ë¡œ 1: **ì™¸ë¶€ ì‚¬ìš©ì â†’ Grafana UI**

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      ì™¸ë¶€ ì‚¬ìš©ì (ë¸Œë¼ìš°ì €)                        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â†“
                  https://ecoeco.app/grafana
                              â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                   Route53 (DNS)                                    â”‚
â”‚   - Alias Record â†’ ALB DNS Name                                    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚          ALB (Application Load Balancer)                           â”‚
â”‚   - Listener: HTTPS:443                                            â”‚
â”‚   - Rule: Path /grafana â†’ grafana-ingress TargetGroup             â”‚
â”‚   - Region: ap-northeast-2 (Seoul) â­                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚              TargetGroup (instance íƒ€ì…)                           â”‚
â”‚   - Target: Worker Node IP:NodePort                                â”‚
â”‚   - k8s-worker-1 (10.0.1.x):30002 (ì˜ˆì‹œ)                          â”‚
â”‚   - k8s-worker-2 (10.0.2.x):30002                                  â”‚
â”‚   - Health Check: /grafana/health                                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚              Worker Node (NodePort)                                â”‚
â”‚   - iptables/kube-proxy: 30002 â†’ Grafana Service                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚          Service (ClusterIP - prometheus-grafana)                  â”‚
â”‚   - Namespace: monitoring                                          â”‚
â”‚   - ClusterIP: 10.96.2.20:80                                       â”‚
â”‚   - Selector: app.kubernetes.io/name=grafana                       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â†“
                    Service Discovery
                              â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                   Pod (Grafana)                                    â”‚
â”‚   - Pod IP: 192.168.6.20                                           â”‚
â”‚   - Node: k8s-monitoring (workload=monitoring)                     â”‚
â”‚   - Port: 3000 (Grafana UI)                                        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

#### ê²½ë¡œ 2: **Grafana â†” Prometheus í†µì‹  (ë‚´ë¶€)**

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                   Grafana Pod                                      â”‚
â”‚   Pod IP: 192.168.6.20                                             â”‚
â”‚   Node: k8s-monitoring                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â†“
            Prometheus Datasource ì„¤ì •
            (prometheus-kube-prometheus-prometheus.monitoring:9090)
                              â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚          Service (ClusterIP - prometheus-xxx)                      â”‚
â”‚   - Namespace: monitoring                                          â”‚
â”‚   - ClusterIP: 10.96.2.10:9090                                     â”‚
â”‚   - Service DNS: prometheus-kube-prometheus-prometheus.monitoring  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â†“
                    Service Discovery
                              â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                   Prometheus Pod                                   â”‚
â”‚   Pod IP: 192.168.6.10                                             â”‚
â”‚   Node: k8s-monitoring (ê°™ì€ ë…¸ë“œ!)                                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**íŠ¹ì§•**:
- Grafanaì™€ Prometheusê°€ **ê°™ì€ ë…¸ë“œ** (k8s-monitoring)ì— ìˆìŒ
- í†µì‹ ì€ **Kubernetes Service DNS**ë¥¼ í†µí•´ ì´ë£¨ì–´ì§
- ë‚´ë¶€ í†µì‹  (ClusterIP)ì´ë¯€ë¡œ **ì™¸ë¶€ ì ‘ê·¼ ë¶ˆê°€**

---

### 3ï¸âƒ£ **ë©”íŠ¸ë¦­ ì¡°íšŒ íë¦„ (ì „ì²´)**

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ì‚¬ìš©ì: Grafana ëŒ€ì‹œë³´ë“œì—ì„œ "RabbitMQ CPU ì‚¬ìš©ë¥ " ì¡°íšŒ          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  1. ë¸Œë¼ìš°ì € â†’ ALB â†’ Grafana Pod (192.168.6.20)                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  2. Grafana â†’ Prometheus (192.168.6.10)                            â”‚
â”‚     PromQL: rate(container_cpu_usage_seconds_total{                â”‚
â”‚                   pod="rabbitmq-xxx"}[5m])                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  3. Prometheus TSDB ì¡°íšŒ (ë¡œì»¬ ë””ìŠ¤í¬)                             â”‚
â”‚     - 7ì¼ì¹˜ ë°ì´í„° ì €ì¥ (50GB PVC)                                 â”‚
â”‚     - ì‹œê³„ì—´ ë°ì´í„°ë² ì´ìŠ¤ì—ì„œ ë©”íŠ¸ë¦­ ê²€ìƒ‰                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  4. Prometheus â†’ Grafana (ê²°ê³¼ ë°˜í™˜)                               â”‚
â”‚     JSON: {timestamp: 1699999999, value: 0.45}                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  5. Grafana â†’ ë¸Œë¼ìš°ì € (ê·¸ë˜í”„ ë Œë”ë§)                             â”‚
â”‚     - ì°¨íŠ¸ ìƒì„± (Line Chart)                                       â”‚
â”‚     - ìƒ‰ìƒ, ë¼ë²¨, ë²”ë¡€ ì¶”ê°€                                        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸŒ ë¦¬ì „ ë° ë„¤íŠ¸ì›Œí¬ êµ¬ì¡°

### AWS ë¦¬ì „: **ap-northeast-2 (Seoul)** â­

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                   AWS Region: ap-northeast-2                       â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                    â”‚
â”‚  VPC: 10.0.0.0/16                                                  â”‚
â”‚  â”œâ”€ Subnet 1 (ap-northeast-2a): 10.0.1.0/24                        â”‚
â”‚  â”‚   â”œâ”€ k8s-master (10.0.1.10)                                     â”‚
â”‚  â”‚   â””â”€ k8s-worker-1 (10.0.1.20)                                   â”‚
â”‚  â”‚                                                                  â”‚
â”‚  â”œâ”€ Subnet 2 (ap-northeast-2b): 10.0.2.0/24                        â”‚
â”‚  â”‚   â”œâ”€ k8s-worker-2 (10.0.2.10)                                   â”‚
â”‚  â”‚   â””â”€ k8s-rabbitmq (10.0.2.20)                                   â”‚
â”‚  â”‚                                                                  â”‚
â”‚  â”œâ”€ Subnet 3 (ap-northeast-2c): 10.0.3.0/24                        â”‚
â”‚  â”‚   â”œâ”€ k8s-postgresql (10.0.3.10)                                 â”‚
â”‚  â”‚   â”œâ”€ k8s-redis (10.0.3.20)                                      â”‚
â”‚  â”‚   â””â”€ k8s-monitoring (10.0.3.30) â­                              â”‚
â”‚  â”‚                                                                  â”‚
â”‚  â””â”€ ALB (ap-northeast-2a, 2b, 2c)                                  â”‚
â”‚      â”œâ”€ ENI: 10.0.1.100 (2a)                                       â”‚
â”‚      â”œâ”€ ENI: 10.0.2.100 (2b)                                       â”‚
â”‚      â””â”€ ENI: 10.0.3.100 (2c)                                       â”‚
â”‚                                                                    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ“Š ëª¨ë‹ˆí„°ë§ Pod ë°°ì¹˜ ìƒì„¸

### Helm Chart ì„¤ì •

**íŒŒì¼**: `ansible/playbooks/08-monitoring.yml`

```yaml
helm install prometheus prometheus-community/kube-prometheus-stack \
  --namespace monitoring \
  --set prometheus.prometheusSpec.nodeSelector.workload=monitoring \
  --set prometheus.prometheusSpec.retention=7d \
  --set prometheus.prometheusSpec.retentionSize=40GB \
  --set prometheus.prometheusSpec.resources.requests.cpu=1000m \
  --set prometheus.prometheusSpec.resources.requests.memory=2Gi \
  --set prometheus.prometheusSpec.resources.limits.memory=4Gi \
  --set prometheus.prometheusSpec.storageSpec.volumeClaimTemplate.spec.resources.requests.storage=50Gi \
  --set grafana.nodeSelector.workload=monitoring \
  --set grafana.adminPassword={{ grafana_admin_password }} \
  --set grafana.resources.requests.cpu=500m \
  --set grafana.resources.requests.memory=512Mi \
  --set alertmanager.alertmanagerSpec.nodeSelector.workload=monitoring \
  --set alertmanager.alertmanagerSpec.resources.requests.cpu=250m \
  --set alertmanager.alertmanagerSpec.resources.requests.memory=256Mi
```

### ë°°ì¹˜ ê²°ê³¼

```bash
kubectl get pods -n monitoring -o wide

NAME                                        NODE             POD-IP
prometheus-kube-prometheus-prometheus-0     k8s-monitoring   192.168.6.10
grafana-xxx                                 k8s-monitoring   192.168.6.20
alertmanager-kube-prometheus-alertmanager-0 k8s-monitoring   192.168.6.30
kube-state-metrics-xxx                      k8s-monitoring   192.168.6.40
prometheus-node-exporter-xxx (Master)       k8s-master       192.168.0.50
prometheus-node-exporter-xxx (Worker-1)     k8s-worker-1     192.168.1.50
prometheus-node-exporter-xxx (Worker-2)     k8s-worker-2     192.168.2.50
prometheus-node-exporter-xxx (RabbitMQ)     k8s-rabbitmq     192.168.3.50
prometheus-node-exporter-xxx (PostgreSQL)   k8s-postgresql   192.168.4.50
prometheus-node-exporter-xxx (Redis)        k8s-redis        192.168.5.50
prometheus-node-exporter-xxx (Monitoring)   k8s-monitoring   192.168.6.50
```

---

## ğŸ” ëª¨ë‹ˆí„°ë§ ì„œë¹„ìŠ¤ ì ‘ê·¼ ë°©ë²•

### 1ï¸âƒ£ **ì™¸ë¶€ ì ‘ê·¼ (ì‚¬ìš©ì)**

#### Grafana UI

```bash
# URL
https://ecoeco.app/grafana

# ë¡œê·¸ì¸
Username: admin
Password: (í™˜ê²½ë³€ìˆ˜ GRAFANA_PASSWORD)
```

**ê²½ë¡œ**:
```
Internet â†’ Route53 â†’ ALB (ap-northeast-2) â†’ Worker Node:NodePort 
â†’ Grafana Service (10.96.2.20:80) â†’ Grafana Pod (192.168.6.20:3000)
```

---

### 2ï¸âƒ£ **ë‚´ë¶€ ì ‘ê·¼ (í´ëŸ¬ìŠ¤í„° ë‚´)**

#### Prometheus (ë‹¤ë¥¸ Podì—ì„œ)

```bash
# Service DNS
prometheus-kube-prometheus-prometheus.monitoring.svc.cluster.local:9090

# ì˜ˆì‹œ: RabbitMQ Podì—ì„œ Prometheus ì ‘ê·¼
curl http://prometheus-kube-prometheus-prometheus.monitoring:9090/api/v1/query?query=up
```

#### Grafana (ë‹¤ë¥¸ Podì—ì„œ)

```bash
# Service DNS
prometheus-grafana.monitoring.svc.cluster.local:80

# ì˜ˆì‹œ: Backend Podì—ì„œ Grafana ì ‘ê·¼
curl http://prometheus-grafana.monitoring/api/health
```

---

### 3ï¸âƒ£ **Port-Forward ì ‘ê·¼ (ê°œë°œ/ë””ë²„ê¹…)**

#### Prometheus

```bash
kubectl port-forward -n monitoring svc/prometheus-kube-prometheus-prometheus 9090:9090

# ë¸Œë¼ìš°ì €
http://localhost:9090
```

#### Grafana

```bash
kubectl port-forward -n monitoring svc/prometheus-grafana 3000:80

# ë¸Œë¼ìš°ì €
http://localhost:3000
```

---

## ğŸ” ëª¨ë‹ˆí„°ë§ ë©”íŠ¸ë¦­ ìˆ˜ì§‘ ì˜ˆì‹œ

### RabbitMQ ë©”íŠ¸ë¦­ ìˆ˜ì§‘

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Prometheus (192.168.6.10, k8s-monitoring)                         â”‚
â”‚  - ServiceMonitor: rabbitmq-cluster-operator ê°ì§€                  â”‚
â”‚  - Target: rabbitmq-xxx.messaging:15692/metrics                    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â†“
                  DNS ì¡°íšŒ (CoreDNS)
        rabbitmq-xxx.messaging â†’ Service ClusterIP
                              â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  RabbitMQ Service (messaging namespace)                            â”‚
â”‚  - ClusterIP: 10.96.3.10:15692                                     â”‚
â”‚  - Endpoint: 192.168.3.5:15692                                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â†“
                    Calico VXLAN Tunnel
        (192.168.6.x â†’ 192.168.3.x í†µì‹ )
                              â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  RabbitMQ Pod (192.168.3.5, k8s-rabbitmq)                          â”‚
â”‚  - Port 15692: Prometheus Exporter                                 â”‚
â”‚  - Metrics: rabbitmq_queue_messages, rabbitmq_connections_total    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Prometheus TSDB (k8s-monitoring)                                  â”‚
â”‚  - ì €ì¥: /prometheus/data (50GB PVC)                               â”‚
â”‚  - ë³´ê´€: 7ì¼ (retention: 7d)                                       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ“ ëª¨ë‹ˆí„°ë§ ì‹œìŠ¤í…œ íŠ¹ì§•

### 1ï¸âƒ£ **ì™„ì „í•œ ê²©ë¦¬**

```
âœ… Prometheus, Grafana, Alertmanager â†’ k8s-monitoring ë…¸ë“œì—ë§Œ ë°°ì¹˜
âœ… ë‹¤ë¥¸ ì›Œí¬ë¡œë“œì™€ ë¦¬ì†ŒìŠ¤ ê²½í•© ì—†ìŒ
âœ… ëª¨ë‹ˆí„°ë§ ì¥ì• ê°€ ì• í”Œë¦¬ì¼€ì´ì…˜ì— ì˜í–¥ ì—†ìŒ
```

### 2ï¸âƒ£ **Calico VXLAN í†µì‹ **

```
âœ… Prometheus (192.168.6.x) â†’ ë‹¤ë¥¸ ë…¸ë“œ Pod (192.168.x.x) ë©”íŠ¸ë¦­ ìˆ˜ì§‘
âœ… VXLAN í„°ë„ì„ í†µí•œ ì•ˆì •ì ì¸ í†µì‹ 
âœ… natOutgoing: true â†’ ì™¸ë¶€ Exporter ì ‘ê·¼ ì‹œ SNAT
```

### 3ï¸âƒ£ **ì™¸ë¶€ ì ‘ê·¼ (ALB)**

```
âœ… Grafana UI: https://ecoeco.app/grafana
âœ… target-type: instance (NodePort ì‚¬ìš©)
âœ… PrometheusëŠ” ì™¸ë¶€ ë…¸ì¶œ ì•ˆë¨ (ë³´ì•ˆ)
```

### 4ï¸âƒ£ **ë°ì´í„° ìˆ˜ì§‘ ë°©ì‹**

```
âœ… Pull ë°©ì‹: Prometheusê°€ ì£¼ê¸°ì ìœ¼ë¡œ ë©”íŠ¸ë¦­ ìˆ˜ì§‘ (15ì´ˆ ê°„ê²©)
âœ… ServiceMonitor: Prometheus Operatorê°€ ìë™ìœ¼ë¡œ Target ê°ì§€
âœ… cAdvisor: Kubelet ë‚´ì¥, ì»¨í…Œì´ë„ˆ ë©”íŠ¸ë¦­ ì œê³µ
```

---

## ğŸ¯ ê²°ë¡ 

**ëª¨ë‹ˆí„°ë§ì€ `k8s-monitoring` ë…¸ë“œ (192.168.6.0/24)ì— ê²©ë¦¬ë˜ì–´ ìˆìŠµë‹ˆë‹¤!**

### ì ‘ê·¼ ê²½ë¡œ

1. **ì™¸ë¶€ ì‚¬ìš©ì â†’ Grafana UI**:
   ```
   Internet â†’ Route53 â†’ ALB (ap-northeast-2) â†’ Worker Node:NodePort 
   â†’ Grafana Service â†’ Grafana Pod (192.168.6.20)
   ```

2. **Prometheus ë©”íŠ¸ë¦­ ìˆ˜ì§‘**:
   ```
   Prometheus (192.168.6.10) â†’ Calico VXLAN â†’ ê° ë…¸ë“œ Exporter (192.168.x.x)
   ```

3. **Grafana â†” Prometheus í†µì‹  (ë‚´ë¶€)**:
   ```
   Grafana (192.168.6.20) â†’ Kubernetes Service DNS 
   â†’ Prometheus (192.168.6.10)
   ```

**ë¦¬ì „**: **ap-northeast-2 (Seoul)** â­

**ëª¨ë“  ë¦¬ì†ŒìŠ¤ê°€ ì„œìš¸ ë¦¬ì „ì— ë°°í¬ë©ë‹ˆë‹¤!** ğŸ‡°ğŸ‡·

