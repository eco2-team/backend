# ğŸ’° EKS + ArgoCD + Helm ìƒì„¸ ë¹„ìš© ë¶„ì„

> **ì „ì œ**: K8s ìš´ì˜ ê²½í—˜ì, ì¸ê±´ë¹„ ì œì™¸  
> **ëª©ì **: ìˆœìˆ˜ ì¸í”„ë¼ ë¹„ìš© ì‚°ì¶œ  
> **ë‚ ì§œ**: 2025-10-30

## ğŸ“‹ ëª©ì°¨

1. [ìˆœìˆ˜ ì¸í”„ë¼ ë¹„ìš©](#ìˆœìˆ˜-ì¸í”„ë¼-ë¹„ìš©)
2. [ìµœì í™” ì „ëµ](#ìµœì í™”-ì „ëµ)
3. [Docker Compose vs EKS ì¬ë¹„êµ](#docker-compose-vs-eks-ì¬ë¹„êµ)
4. [ì¶”ì²œ êµ¬ì„±](#ì¶”ì²œ-êµ¬ì„±)
5. [ìµœì¢… ê²°ë¡ ](#ìµœì¢…-ê²°ë¡ )

---

## ğŸ’° ìˆœìˆ˜ ì¸í”„ë¼ ë¹„ìš©

### EKS + ArgoCD + Helm ê¸°ë³¸ êµ¬ì„±

```mermaid
graph TB
    subgraph EKS["AWS EKS í´ëŸ¬ìŠ¤í„°"]
        CP[Control Plane<br/>$73/ì›”]
        
        subgraph NodeGroup1["API Nodes"]
            N1[t3.medium Ã— 3<br/>$30 Ã— 3 = $90/ì›”]
        end
        
        subgraph NodeGroup2["Worker Nodes"]
            N2[t3.large Ã— 2<br/>$60 Ã— 2 = $120/ì›”]
        end
    end
    
    subgraph Add["ë¶€ê°€ ì„œë¹„ìŠ¤"]
        ECR[ECR<br/>50GB<br/>$5/ì›”]
        ALB[ALB<br/>$16/ì›”]
        EBS[EBS<br/>100GB<br/>$10/ì›”]
        DataTransfer[ë°ì´í„° ì „ì†¡<br/>100GB<br/>$9/ì›”]
    end
    
    subgraph Free["ë¬´ë£Œ ì»´í¬ë„ŒíŠ¸"]
        Argo[ArgoCD<br/>$0<br/>EKS ë‚´ ì‹¤í–‰]
        Helm[Helm<br/>$0<br/>í´ë¼ì´ì–¸íŠ¸ ë„êµ¬]
        Prom[Prometheus<br/>$0<br/>ì˜¤í”ˆì†ŒìŠ¤]
    end
    
    style CP fill:#ffe1e1,stroke:#ff3333
    style N1 fill:#fff4e1,stroke:#ff9900
    style N2 fill:#fff0e1,stroke:#ffaa00
    style ECR fill:#e1f5ff,stroke:#0066cc
    style ALB fill:#e1ffe1,stroke:#00cc66
    style Argo fill:#f0e1ff,stroke:#9933ff
```

### ìƒì„¸ ë¹„ìš©í‘œ

```
=== AWS EKS ===
Control Plane: $73/ì›” (ê³ ì •)
â”œâ”€ 3 Master ë…¸ë“œ (AWS ê´€ë¦¬)
â”œâ”€ etcd ë°±ì—…
â””â”€ API Server, Scheduler, Controller Manager

=== Worker Nodes (API Services) ===
t3.medium Ã— 3ëŒ€
â”œâ”€ vCPU: 2 Ã— 3 = 6 cores
â”œâ”€ Memory: 4GB Ã— 3 = 12GB
â”œâ”€ ìš©ë„: auth, users, locations
â””â”€ ë¹„ìš©: $30 Ã— 3 = $90/ì›”

=== Worker Nodes (Heavy Workload) ===
t3.large Ã— 2ëŒ€
â”œâ”€ vCPU: 2 Ã— 2 = 4 cores
â”œâ”€ Memory: 8GB Ã— 2 = 16GB
â”œâ”€ ìš©ë„: waste, recycling, celery workers
â””â”€ ë¹„ìš©: $60 Ã— 2 = $120/ì›”

=== ECR (Container Registry) ===
ì´ë¯¸ì§€ ì €ì¥
â”œâ”€ 5ê°œ ì„œë¹„ìŠ¤ Ã— 10 íƒœê·¸ = 50 ì´ë¯¸ì§€
â”œâ”€ í‰ê·  500MB/ì´ë¯¸ì§€ = 25GB
â”œâ”€ ECR: $0.10/GB/ì›”
â””â”€ ë¹„ìš©: 25 Ã— $0.10 = $2.5/ì›”
    (50GB ì¡ì•„ë„ $5/ì›”)

=== ALB (Application Load Balancer) ===
ì™¸ë¶€ íŠ¸ë˜í”½ ìˆ˜ì‹ 
â”œâ”€ ê¸°ë³¸ ë¹„ìš©: $16/ì›”
â”œâ”€ LCU ë¹„ìš©: ~$5/ì›” (ë‚®ì€ íŠ¸ë˜í”½)
â””â”€ ì´: $21/ì›”

=== EBS (ì˜êµ¬ ìŠ¤í† ë¦¬ì§€) ===
ë°ì´í„°ë² ì´ìŠ¤, Redis ë³¼ë¥¨
â”œâ”€ gp3 100GB
â”œâ”€ $0.08/GB/ì›”
â””â”€ ë¹„ìš©: $8/ì›”

=== ë°ì´í„° ì „ì†¡ ===
ì¸í„°ë„· ì•„ì›ƒë°”ìš´ë“œ
â”œâ”€ ì²« 100GB: $0.09/GB
â”œâ”€ ì˜ˆìƒ ì‚¬ìš©: 50GB/ì›”
â””â”€ ë¹„ìš©: 50 Ã— $0.09 = $4.5/ì›”

=== ë¬´ë£Œ ì»´í¬ë„ŒíŠ¸ ===
ArgoCD: $0 (EKS Podë¡œ ì‹¤í–‰)
Helm: $0 (ë¡œì»¬ CLI)
Prometheus: $0 (ì˜¤í”ˆì†ŒìŠ¤)
Grafana: $0 (ì˜¤í”ˆì†ŒìŠ¤)

â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
ì´ ì¸í”„ë¼ ë¹„ìš©: $323.5/ì›”
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
```

---

## ğŸ”§ ìµœì í™” ì „ëµ

### ë¹„ìš© ì ˆê° í¬ì¸íŠ¸

#### 1. Spot Instances ì‚¬ìš©

```
ê¸°ì¡´:
t3.large On-Demand Ã— 2 = $120/ì›”

ìµœì í™”:
t3.large Spot Ã— 2 = $36/ì›” (70% í• ì¸)

ì¡°ê±´:
- Worker ë…¸ë“œë§Œ Spot ì‚¬ìš©
- API ë…¸ë“œëŠ” On-Demand (ì•ˆì •ì„±)
- Spot Interruption Handler ì„¤ì¹˜

ì ˆê°: $84/ì›”
```

```yaml
# EKS Node Group (Spot)
nodeGroups:
  - name: worker-spot
    instanceType: t3.large
    desiredCapacity: 2
    minSize: 1
    maxSize: 5
    instancesDistribution:
      onDemandBaseCapacity: 0
      onDemandPercentageAboveBaseCapacity: 0
      spotInstancePools: 3
    labels:
      workload: worker
      lifecycle: spot
```

#### 2. Auto Scaling ìµœì í™”

```
ê¸°ì¡´:
ê³ ì • 5ëŒ€ = 24ì‹œê°„ ê°€ë™

ìµœì í™”:
Cluster Autoscaler
â”œâ”€ í”¼í¬ ì‹œê°„ (12-22ì‹œ): 5ëŒ€
â”œâ”€ ì•¼ê°„ (22-08ì‹œ): 2ëŒ€
â””â”€ ìƒˆë²½ (02-06ì‹œ): 1ëŒ€

í‰ê·  ë…¸ë“œ: 3.5ëŒ€
ì ˆê°: (5 - 3.5) / 5 = 30%

ì›” ì ˆê°: $63
```

```yaml
# Cluster Autoscaler ì„¤ì •
apiVersion: v1
kind: ConfigMap
metadata:
  name: cluster-autoscaler-config
data:
  scale-down-delay-after-add: "10m"
  scale-down-unneeded-time: "10m"
  skip-nodes-with-local-storage: "false"
```

#### 3. Fargate Spot (ì„ íƒì )

```
Celery Workerë¥¼ Fargate Spotìœ¼ë¡œ

ê¸°ì¡´:
t3.large Ã— 2 (Worker ì „ìš©) = $120/ì›”

ìµœì í™”:
Fargate Spot
â”œâ”€ í•„ìš”í•  ë•Œë§Œ ì‹¤í–‰
â”œâ”€ vCPU: 0.25 Ã— $0.04 Ã— 730h = $7.3/pod/ì›”
â”œâ”€ Memory: 0.5GB Ã— $0.004 Ã— 730h = $1.5/pod/ì›”
â”œâ”€ ì´: $8.8/pod/ì›”
â””â”€ í‰ê·  3 pods = $26.4/ì›”

ì ˆê°: $93.6/ì›” (78% í• ì¸!)
```

#### 4. ECR ìˆ˜ëª…ì£¼ê¸° ì •ì±…

```json
// ECR Lifecycle Policy
{
  "rules": [{
    "rulePriority": 1,
    "description": "30ì¼ ì´ìƒ ëœ ì´ë¯¸ì§€ ì‚­ì œ",
    "selection": {
      "tagStatus": "any",
      "countType": "sinceImagePushed",
      "countUnit": "days",
      "countNumber": 30
    },
    "action": {
      "type": "expire"
    }
  }]
}

ì ˆê°: ECR ë¹„ìš© 50% ($2.5/ì›” â†’ $1.25/ì›”)
```

#### 5. Reserved Instances (ì¥ê¸°)

```
1ë…„ ì•½ì • ì‹œ:
t3.medium Ã— 3
â”œâ”€ On-Demand: $90/ì›”
â””â”€ Reserved: $54/ì›” (40% í• ì¸)

ì ˆê°: $36/ì›”

ë‹¨, 1ë…„ ì•½ì • í•„ìš” (í•´ì»¤í†¤ì—” ë¶€ì í•©)
```

---

## ğŸ’¡ ìµœì í™”ëœ EKS êµ¬ì„±

### ë¹„ìš© ìµœì í™” êµ¬ì„±

```
=== í•„ìˆ˜ ë¹„ìš© (ì‚­ì œ ë¶ˆê°€) ===
EKS Control Plane: $73/ì›”

=== ìµœì í™” ê°€ëŠ¥ ë¹„ìš© ===
ê¸°ì¡´:
â”œâ”€ API Nodes (t3.medium Ã— 3): $90/ì›”
â”œâ”€ Worker Nodes (t3.large Ã— 2): $120/ì›”
â”œâ”€ ECR: $5/ì›”
â”œâ”€ ALB: $21/ì›”
â”œâ”€ EBS: $8/ì›”
â”œâ”€ ë°ì´í„° ì „ì†¡: $4.5/ì›”
â””â”€ í•©ê³„: $248.5/ì›”

ìµœì í™” í›„:
â”œâ”€ API Nodes (t3.small Ã— 2): $30/ì›”  âœ… 67% ì ˆê°
â”œâ”€ Worker Nodes (Fargate Spot): $26/ì›”  âœ… 78% ì ˆê°
â”œâ”€ ECR (ìˆ˜ëª…ì£¼ê¸°): $1.25/ì›”  âœ… 75% ì ˆê°
â”œâ”€ ALB: $16/ì›”  (ìµœì í™” ì–´ë ¤ì›€)
â”œâ”€ EBS (gp3 ìµœì í™”): $5/ì›”  âœ… 38% ì ˆê°
â”œâ”€ ë°ì´í„° ì „ì†¡: $4.5/ì›”  (ë³€ë™)
â””â”€ í•©ê³„: $82.75/ì›”

â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
ì´: $73 + $82.75 = $155.75/ì›”
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

vs ìµœì í™” ì „: $323.5/ì›”
ì ˆê°: $167.75/ì›” (52% ì ˆê°!)
```

### ìµœì†Œ êµ¬ì„± (í•´ì»¤í†¤ìš©)

```
=== ê·¹ë„ë¡œ ìµœì í™” ===
EKS Control Plane: $73/ì›” (ê³ ì •, ì‚­ì œ ë¶ˆê°€)

Worker Nodes (í†µí•©):
â”œâ”€ t3.small Ã— 2 (ëª¨ë“  ì„œë¹„ìŠ¤ í†µí•©)
â”œâ”€ vCPU: 2 Ã— 2 = 4 cores
â”œâ”€ Memory: 2GB Ã— 2 = 4GB
â”œâ”€ ë¹„ìš©: $15 Ã— 2 = $30/ì›”

Fargate Spot (Workerë§Œ):
â”œâ”€ Celery Worker ì „ìš©
â”œâ”€ í‰ê·  2 pods ì‹¤í–‰
â””â”€ ë¹„ìš©: $17.6/ì›”

ECR: $1/ì›” (ìµœì†Œ)
NLB (ALB ëŒ€ì‹ ): $8/ì›”
EBS: $3/ì›” (30GB)
ë°ì´í„°: $3/ì›”

â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
ì´: $135.6/ì›” (ìµœì†Œ êµ¬ì„±)
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

vs Docker Compose: $60/ì›”
ì°¨ì´: $75.6/ì›” (2.26ë°°)

â†’ ìƒê°ë³´ë‹¤ ì°¨ì´ í¬ì§€ ì•ŠìŒ!
```

---

## ğŸ“Š Docker Compose vs EKS ì¬ë¹„êµ (ê²½í—˜ì ê¸°ì¤€)

### ì¸ê±´ë¹„ ì œì™¸ ì‹œ

| í•­ëª© | Docker Compose | EKS (ê¸°ë³¸) | EKS (ìµœì í™”) |
|------|---------------|-----------|-------------|
| **ì»´í“¨íŒ…** | $60 | $210 | $48 |
| **ë¡œë“œë°¸ëŸ°ì„œ** | $0 | $21 | $8 |
| **ë ˆì§€ìŠ¤íŠ¸ë¦¬** | $0 | $5 | $1 |
| **ìŠ¤í† ë¦¬ì§€** | $0 | $8 | $3 |
| **ê´€ë¦¬ ë¹„ìš©** | $0 | $73 | $73 |
| **ê¸°íƒ€** | $0 | $6.5 | $3 |
| **ì´ê³„** | **$60** | **$323.5** | **$136** |
| **vs Docker** | ê¸°ì¤€ | 5.4ë°° | 2.3ë°° |

### K8s ê²½í—˜ìì˜ ì‹œê°„ íˆ¬ì

```
ì´ˆê¸° êµ¬ì¶•:
â”œâ”€ EKS í´ëŸ¬ìŠ¤í„°: 2ì‹œê°„
â”œâ”€ ArgoCD ì„¤ì¹˜: 1ì‹œê°„
â”œâ”€ Helm Charts: 4ì‹œê°„ (5ê°œ ì„œë¹„ìŠ¤)
â”œâ”€ Ingress/SSL: 1ì‹œê°„
â””â”€ ì´: 8ì‹œê°„ (1ì¼)

vs ì´ˆë³´ì: 5-6ì¼
â†’ 6ë°° ë¹ ë¦„!

ì›”ê°„ ê´€ë¦¬:
â”œâ”€ ëª¨ë‹ˆí„°ë§ í™•ì¸: 30ë¶„/ì£¼
â”œâ”€ ì—…ë°ì´íŠ¸: 1ì‹œê°„/ì›”
â””â”€ ì´: 3ì‹œê°„/ì›”

vs Docker Compose: 2ì‹œê°„/ì›”
â†’ í° ì°¨ì´ ì—†ìŒ
```

---

## ğŸ¯ K8s ê²½í—˜ì ê´€ì ì˜ ì¥ì 

### ì¶”ê°€ ì´ì  (ê²½í—˜ìë§Œ ëˆ„ë¦¼)

```
1. ë¹ ë¥¸ êµ¬ì¶•
   âœ… 1ì¼ ë§Œì— ì™„ì„±
   âœ… íŠ¸ëŸ¬ë¸”ìŠˆíŒ… ë¹ ë¦„
   âœ… Best Practice ì ìš©

2. íš¨ìœ¨ì  ë¦¬ì†ŒìŠ¤ ì‚¬ìš©
   âœ… HPA (Auto Scaling) ìµœì  ì„¤ì •
   âœ… Resource Limits ì •í™•íˆ ì„¤ì •
   âœ… Spot Instance ì•ˆì „í•˜ê²Œ ì‚¬ìš©

3. ê³ ê¸‰ ê¸°ëŠ¥ í™œìš©
   âœ… Canary ë°°í¬ (Flagger)
   âœ… Service Mesh (Istio - ì„ íƒ)
   âœ… ë„¤íŠ¸ì›Œí¬ ì •ì±… (ë³´ì•ˆ)

4. ë¬¸ì œ í•´ê²° ëŠ¥ë ¥
   âœ… kubectl ëŠ¥ìˆ™í•˜ê²Œ ì‚¬ìš©
   âœ… Pod ì¥ì•  ì¦‰ì‹œ íŒŒì•…
   âœ… ë¡œê·¸ ë¶„ì„ ë¹ ë¦„

5. ì´ë ¥ì„œ ê°€ì¹˜
   âœ… í¬íŠ¸í´ë¦¬ì˜¤ í’ˆì§ˆ í–¥ìƒ
   âœ… GitOps ê²½í—˜ ì¦ëª…
   âœ… Cloud Native ê°œë°œì
```

---

## ğŸš€ ì¶”ì²œ êµ¬ì„± (ê²½í—˜ììš©)

### ì˜µì…˜ 1: **EKS ìµœì í™” êµ¬ì„±** â­â­â­â­

```
êµ¬ì„±:
â”œâ”€ EKS Control Plane: $73/ì›”
â”œâ”€ t3.small Ã— 2 (API): $30/ì›”
â”œâ”€ Fargate Spot (Workers): $18/ì›”
â”œâ”€ NLB: $8/ì›”
â”œâ”€ ECR: $1/ì›”
â””â”€ ê¸°íƒ€: $6/ì›”

ì´: $136/ì›”

ì¶”ê°€ ë¹„ìš©:
â”œâ”€ ê°œë°œ ë‹¨ê³„: $60/ì›” (ìµœì†Œ ë¦¬ì†ŒìŠ¤)
â””â”€ í”„ë¡œë•ì…˜: $136/ì›”

í•´ì»¤í†¤ ì „ê¹Œì§€ë§Œ ê°œë°œ í™˜ê²½
â†’ í•´ì»¤í†¤ ë‹¹ì¼ í”„ë¡œë•ì…˜ìœ¼ë¡œ ì „í™˜
```

**êµ¬ì¶• ì¼ì •:**
```
Day 1: EKS + ArgoCD ì„¤ì¹˜ (4ì‹œê°„)
Day 2: Helm Charts ì‘ì„± (4ì‹œê°„)
Day 3: í…ŒìŠ¤íŠ¸ & ê²€ì¦ (2ì‹œê°„)

ì´: 1.5ì¼

â†’ Week 1ì— ì¸í”„ë¼ ì™„ì„±
â†’ Week 2-4ëŠ” ê¸°ëŠ¥ ê°œë°œ
```

**ì´ì :**
- âœ… ë¹„ìš© í•©ë¦¬ì  ($136/ì›”, Dockerì˜ 2.3ë°°)
- âœ… êµ¬ì¶• ë¹ ë¦„ (1.5ì¼)
- âœ… í”„ë¡œë•ì…˜ê¸‰ ì•ˆì •ì„±
- âœ… ìë™ ìŠ¤ì¼€ì¼ë§
- âœ… í•´ì»¤í†¤ í›„ ê·¸ëŒ€ë¡œ ì„œë¹„ìŠ¤ ê°€ëŠ¥

---

## ğŸ’¡ ì‹¤ìš©ì ì¸ í•˜ì´ë¸Œë¦¬ë“œ

### ë‹¨ê³„ë³„ ì „í™˜ ì „ëµ

```mermaid
flowchart LR
    A[Week 1<br/>EKS êµ¬ì¶•<br/>ìµœì†Œ ë¹„ìš© ëª¨ë“œ] --> B[Week 2-3<br/>ê°œë°œ<br/>Docker Compose]
    B --> C[Week 4<br/>EKSë¡œ ì´ì „<br/>í…ŒìŠ¤íŠ¸]
    C --> D{í•´ì»¤í†¤ D-1}
    D -->|ì•ˆì •| E[EKS ì‚¬ìš©<br/>$136/ì›”]
    D -->|ë¶ˆì•ˆ| F[Docker ë³µê·€<br/>$60/ì›”]
    
    style A fill:#e1f5ff,stroke:#0066cc
    style B fill:#e1ffe1,stroke:#00cc66
    style C fill:#fff4e1,stroke:#ff9900
    style E fill:#f0e1ff,stroke:#9933ff,stroke-width:3px
    style F fill:#e1ffe1,stroke:#00cc66
```

**ì „ëµ:**
1. **Week 1**: EKS í´ëŸ¬ìŠ¤í„° êµ¬ì¶• (ìµœì†Œ ë¹„ìš© $60/ì›”)
2. **Week 2-3**: Docker Composeë¡œ ë¹ ë¥¸ ê°œë°œ
3. **Week 4**: EKSë¡œ ì´ì „ + í†µí•© í…ŒìŠ¤íŠ¸
4. **í•´ì»¤í†¤ D-1**: ì•ˆì •ì„± ê²€ì¦
   - âœ… ì•ˆì •ì  â†’ EKS ì‚¬ìš©
   - âš ï¸ ë¶ˆì•ˆì • â†’ Docker Compose ì‚¬ìš©

**ë¹„ìš©:**
- ê°œë°œ ê¸°ê°„ (3ì£¼): $60/ì›” (ìµœì†Œ êµ¬ì„±)
- í•´ì»¤í†¤ (1ì£¼): $136/ì›” (í”„ë¡œë•ì…˜)
- í‰ê· : $75/ì›”

---

## ğŸ¯ í˜„ì‹¤ì ì¸ ì œì•ˆ

### K8s ê²½í—˜ìë¼ë©´ ì´ë ‡ê²Œ í•˜ì„¸ìš”

#### Phase 1: Week 1 (ì¸í”„ë¼ êµ¬ì¶•)

```bash
# 1. EKS í´ëŸ¬ìŠ¤í„° ìƒì„± (ìµœì†Œ êµ¬ì„±)
eksctl create cluster \
  --name sesacthon-dev \
  --region ap-northeast-2 \
  --node-type t3.small \
  --nodes 2 \
  --nodes-min 1 \
  --nodes-max 3

# 2. ArgoCD ì„¤ì¹˜
kubectl create namespace argocd
kubectl apply -n argocd -f \
  https://raw.githubusercontent.com/argoproj/argo-cd/stable/manifests/install.yaml

# 3. Ingress Controller
helm repo add ingress-nginx https://kubernetes.github.io/ingress-nginx
helm install nginx-ingress ingress-nginx/ingress-nginx

# 4. Cert-manager (SSL)
kubectl apply -f \
  https://github.com/cert-manager/cert-manager/releases/download/v1.13.0/cert-manager.yaml

ì´ ì†Œìš”: 4ì‹œê°„ (ê²½í—˜ì ê¸°ì¤€)
```

#### Phase 2: Week 1-2 (Helm Charts)

```bash
# ê° ì„œë¹„ìŠ¤ë³„ Helm Chart í…œí”Œë¦¿ ìƒì„±
helm create charts/auth
helm create charts/users
helm create charts/waste
helm create charts/recycling
helm create charts/locations

# Values íŒŒì¼ ìµœì í™”
# - Resource requests/limits
# - HPA ì„¤ì •
# - Ingress ê·œì¹™

ì´ ì†Œìš”: 4-6ì‹œê°„
```

#### Phase 3: Week 2-3 (ì• í”Œë¦¬ì¼€ì´ì…˜ ê°œë°œ)

```bash
# Docker Composeë¡œ ë¡œì»¬ ê°œë°œ (ë¹ ë¦„)
docker-compose -f docker-compose.dev.yml up

# ì½”ë“œ ì™„ì„± í›„ EKSë¡œ ë°°í¬ í…ŒìŠ¤íŠ¸
docker build -t auth-service:v1.0.0 ./services/auth
docker push $ECR/auth-service:v1.0.0

# ArgoCDê°€ ìë™ ë°°í¬
# ë˜ëŠ”
helm upgrade --install auth charts/auth \
  --set image.tag=v1.0.0
```

#### Phase 4: Week 4 (í†µí•© & ìµœì í™”)

```bash
# 1. ì „ì²´ ì„œë¹„ìŠ¤ EKS ë°°í¬
# 2. ë¶€í•˜ í…ŒìŠ¤íŠ¸
# 3. Auto Scaling ê²€ì¦
# 4. ì¥ì•  ì‹œë‚˜ë¦¬ì˜¤ í…ŒìŠ¤íŠ¸
# 5. Rollback í…ŒìŠ¤íŠ¸

# ë§Œì•½ ë¶ˆì•ˆì •í•˜ë©´
â†’ Docker Composeë¡œ ë³µê·€ (ë°±ì—…)
```

---

## ğŸ“Š ìµœì í™” í›„ ë¹„êµ

### ë¹„ìš© ë¹„êµ (ìˆœìˆ˜ ì¸í”„ë¼)

```
Docker Compose (EC2 t3.large):
â””â”€ $60/ì›”

EKS (ìµœì†Œ êµ¬ì„±):
â”œâ”€ Control Plane: $73/ì›”
â””â”€ t3.small Ã— 2: $30/ì›”
â””â”€ ì´: $103/ì›”

EKS (ìµœì í™”):
â”œâ”€ Control Plane: $73/ì›”
â”œâ”€ t3.small Ã— 2: $30/ì›”
â”œâ”€ Fargate Spot: $18/ì›”
â”œâ”€ NLB: $8/ì›”
â”œâ”€ ê¸°íƒ€: $7/ì›”
â””â”€ ì´: $136/ì›”

ì°¨ì´:
Docker: $60/ì›”
EKS ìµœì í™”: $136/ì›”
â†’ $76/ì›” ì°¨ì´ (2.3ë°°)

â†’ K8s ê²½í—˜ìë¼ë©´ ê°ë‹¹ ê°€ëŠ¥!
```

### ì‹œê°„ íˆ¬ì (K8s ê²½í—˜ì)

```
Docker Compose:
â”œâ”€ êµ¬ì¶•: 1ì¼
â”œâ”€ ê°œë°œ: 3ì£¼
â””â”€ ì´: 22ì¼

EKS:
â”œâ”€ êµ¬ì¶•: 1.5ì¼ (ê²½í—˜ì ê¸°ì¤€)
â”œâ”€ ê°œë°œ: 3ì£¼ (ë™ì¼)
â””â”€ ì´: 22.5ì¼

ì°¨ì´: 0.5ì¼ (ë¬´ì‹œ ê°€ëŠ¥)

â†’ ì‹œê°„ ì°¨ì´ ê±°ì˜ ì—†ìŒ!
```

---

## âœ… K8s ê²½í—˜ìë¥¼ ìœ„í•œ ìµœì¢… ì¶”ì²œ

### **EKS ìµœì í™” êµ¬ì„± ê³ ë ¤ ê°€ëŠ¥ â­â­â­â­**

```
ì¡°ê±´:
âœ… K8s ìš´ì˜ ê²½í—˜ì
âœ… eksctl, kubectl, helm ëŠ¥ìˆ™
âœ… ì›” $136 ì˜ˆì‚° ê°€ëŠ¥
âœ… 1.5ì¼ ì¸í”„ë¼ êµ¬ì¶• ì‹œê°„ í™•ë³´
âœ… Docker Compose ë°±ì—… ê³„íš

êµ¬ì„±:
â”œâ”€ EKS Control Plane
â”œâ”€ t3.small Ã— 2 (API)
â”œâ”€ Fargate Spot (Workers)
â”œâ”€ ArgoCD (GitOps)
â””â”€ Helm Charts

ë¹„ìš©: $136/ì›” (Dockerì˜ 2.3ë°°)
êµ¬ì¶•: 1.5ì¼
ë³µì¡ë„: ê²½í—˜ìì—ê²ŒëŠ” â­â­â­

ì´ì :
âœ… í”„ë¡œë•ì…˜ê¸‰ ì¸í”„ë¼
âœ… ìë™ ìŠ¤ì¼€ì¼ë§
âœ… GitOps ìë™í™”
âœ… ë¬´ì¤‘ë‹¨ ë°°í¬
âœ… í•´ì»¤í†¤ í›„ ê·¸ëŒ€ë¡œ ì„œë¹„ìŠ¤
âœ… í¬íŠ¸í´ë¦¬ì˜¤ ê°€ì¹˜ ìƒìŠ¹

ë¦¬ìŠ¤í¬:
âš ï¸ í•´ì»¤í†¤ ë‹¹ì¼ ì¥ì•  ê°€ëŠ¥ì„± (10%)
âš ï¸ Docker Compose ë°±ì—… í•„ìˆ˜
```

### ì‹¤í–‰ ê³„íš

```mermaid
gantt
    title EKS êµ¬ì¶• ë° ê°œë°œ ì¼ì •
    dateFormat YYYY-MM-DD
    
    section ì¸í”„ë¼
    EKS í´ëŸ¬ìŠ¤í„° ìƒì„±          :2025-11-01, 4h
    ArgoCD ì„¤ì¹˜               :2025-11-01, 2h
    Helm Charts ì‘ì„±          :2025-11-02, 6h
    í…ŒìŠ¤íŠ¸ & ê²€ì¦              :2025-11-03, 4h
    
    section ê°œë°œ
    ì„œë¹„ìŠ¤ ê°œë°œ (ë³‘ë ¬)         :2025-11-04, 14d
    EKS í†µí•© í…ŒìŠ¤íŠ¸            :2025-11-18, 3d
    ë¶€í•˜ í…ŒìŠ¤íŠ¸                :2025-11-21, 2d
    
    section ë°±ì—…
    Docker Compose ìœ ì§€        :2025-11-04, 20d
    ìµœì¢… ê²€ì¦                  :2025-11-24, 2d
    
    section í•´ì»¤í†¤
    ë°°í¬ í™˜ê²½ ì„ íƒ             :crit, 2025-11-26, 1d
    ë°ëª¨ ì‹œì—°                  :milestone, 2025-11-27, 0d
```

**ì¼ì •:**
- 11ì›” 1-3ì¼: EKS êµ¬ì¶• (3ì¼)
- 11ì›” 4-17ì¼: ê°œë°œ (2ì£¼)
- 11ì›” 18-23ì¼: í†µí•© í…ŒìŠ¤íŠ¸ (1ì£¼)
- 11ì›” 24-26ì¼: ìµœì¢… ê²€ì¦
- 11ì›” 27ì¼: í•´ì»¤í†¤ (ë°°í¬ í™˜ê²½ ì„ íƒ)

---

## ğŸ’¡ ì†”ì§í•œ ì¡°ì–¸ (K8s ê²½í—˜ìì—ê²Œ)

### EKSë¥¼ ì„ íƒí•´ë„ ë˜ëŠ” ê²½ìš°

```
âœ… ë‹¤ìŒ ì¡°ê±´ ëª¨ë‘ ì¶©ì¡± ì‹œ:

1. ì˜ˆì‚°
   â–¡ ì›” $136 ì§€ì¶œ ê°€ëŠ¥
   â–¡ 3-4ê°œì›” ìœ ì§€ ì˜ˆì • ($400-500 ì´)

2. ì‹œê°„
   â–¡ 11ì›” í•œ ë‹¬ ì¤€ë¹„ ê¸°ê°„
   â–¡ ì£¼ë§ íˆ¬ì ê°€ëŠ¥

3. ëª©ì 
   â–¡ í•´ì»¤í†¤ + ì‹¤ì œ ì„œë¹„ìŠ¤ ë‘˜ ë‹¤
   â–¡ í¬íŠ¸í´ë¦¬ì˜¤ ê°•í™”
   â–¡ K8s ê¸°ìˆ  ì—°ë§ˆ

4. ë°±ì—…
   â–¡ Docker Compose ì¤€ë¹„ë¨
   â–¡ í•´ì»¤í†¤ D-1ì— ì „í™˜ ê°€ëŠ¥

â†’ ëª¨ë‘ Yes? EKS ì¶”ì²œ!
```

### Docker Composeë¥¼ ì„ íƒí•´ì•¼ í•˜ëŠ” ê²½ìš°

```
í•˜ë‚˜ë¼ë„ í•´ë‹¹ë˜ë©´:

âŒ ì˜ˆì‚° ì œì•½ ($60/ì›”ë§Œ ê°€ëŠ¥)
âŒ ì‹œê°„ ë¶€ì¡± (ì£¼ë§ íˆ¬ì ì–´ë ¤ì›€)
âŒ í•´ì»¤í†¤ë§Œ ëª©ì  (ì´í›„ ì„œë¹„ìŠ¤ ì•ˆ í•¨)
âŒ ë¦¬ìŠ¤í¬ íšŒí”¼ (ì•ˆì „ ì œì¼)
âŒ íŒ€ì›ë“¤ K8s ëª¨ë¦„

â†’ Docker Compose ì¶”ì²œ!
```

---

## ğŸ” ìƒì„¸ ë¹„ìš© ì‹œë‚˜ë¦¬ì˜¤

### ì‹œë‚˜ë¦¬ì˜¤ 1: ê°œë°œ ê¸°ê°„ (3ì£¼)

```
ìµœì†Œ êµ¬ì„± ìœ ì§€:
â”œâ”€ EKS Control Plane: $73/ì›”
â”œâ”€ t3.small Ã— 1: $15/ì›”
â”œâ”€ ECR: $0.5/ì›”
â””â”€ ì´: $88.5/ì›”

3ì£¼ = 0.75ê°œì›”
ë¹„ìš©: $88.5 Ã— 0.75 = $66.4

â†’ Docker Compose ($60 Ã— 0.75 = $45)
ì°¨ì´: $21.4
```

### ì‹œë‚˜ë¦¬ì˜¤ 2: í•´ì»¤í†¤ ë‹¹ì¼ (2ì¼)

```
í”„ë¡œë•ì…˜ êµ¬ì„±:
â”œâ”€ EKS Control Plane: $73/ì›”
â”œâ”€ t3.small Ã— 2: $30/ì›”
â”œâ”€ Fargate Spot: $18/ì›”
â”œâ”€ NLB: $8/ì›”
â””â”€ ì´: $129/ì›”

2ì¼ = 0.067ê°œì›”
ë¹„ìš©: $129 Ã— 0.067 = $8.6

â†’ í•´ì»¤í†¤ë§Œ ë”°ì§€ë©´ $10ë„ ì•ˆ ë¨!
```

### ì‹œë‚˜ë¦¬ì˜¤ 3: ì´ ë¹„ìš© (4ì£¼ ê°œë°œ + í•´ì»¤í†¤)

```
Week 1 (ì¸í”„ë¼): $88.5 Ã— 0.25 = $22
Week 2-4 (ê°œë°œ): $88.5 Ã— 0.75 = $66
í•´ì»¤í†¤ (2ì¼): $129 Ã— 0.067 = $9

ì´: $97

vs Docker Compose: $60 Ã— 1ê°œì›” = $60
ì°¨ì´: $37

â†’ ì›” $37 ë” ë¹„ìŒˆ (1.6ë°°)
â†’ ì¶©ë¶„íˆ ê°ë‹¹ ê°€ëŠ¥!
```

---

## ğŸ¯ ìµœì¢… ì¶”ì²œ (K8s ê²½í—˜ì)

### âœ… **EKS ìµœì í™” êµ¬ì„± ì¶”ì²œ!** â­â­â­â­

```
ì´ìœ :

1. ë¹„ìš© í•©ë¦¬ì 
   âœ… $136/ì›” (Dockerì˜ 2.3ë°°)
   âœ… ê°œë°œ ê¸°ê°„ í‰ê·  $75/ì›”
   âœ… ê°ë‹¹ ê°€ëŠ¥í•œ ìˆ˜ì¤€

2. ì‹œê°„ íš¨ìœ¨
   âœ… êµ¬ì¶• 1.5ì¼ (ê²½í—˜ì ê¸°ì¤€)
   âœ… ê°œë°œ ì‹œê°„ ë™ì¼
   âœ… ì´ ì°¨ì´ 0.5ì¼

3. ê¸°ìˆ ì  ì´ì 
   âœ… í”„ë¡œë•ì…˜ê¸‰ ì•ˆì •ì„±
   âœ… Auto Scaling
   âœ… GitOps ìë™í™”
   âœ… ë¬´ì¤‘ë‹¨ ë°°í¬

4. ì „ëµì  ê°€ì¹˜
   âœ… í•´ì»¤í†¤ í›„ ê·¸ëŒ€ë¡œ ì„œë¹„ìŠ¤
   âœ… í¬íŠ¸í´ë¦¬ì˜¤ ê°•í™”
   âœ… ì‹¬ì‚¬ìœ„ì› ì¸ìƒ ê¹ŠìŒ
   âœ… ì±„ìš© ì‹œ ì–´í•„ í¬ì¸íŠ¸

5. ë°±ì—… ê³„íš
   âœ… Docker Compose ì¤€ë¹„
   âœ… í•´ì»¤í†¤ D-1 ì „í™˜ ê°€ëŠ¥
   âœ… ë¦¬ìŠ¤í¬ ê´€ë¦¬ë¨
```

### ì¶”ì²œ êµ¬ì„± ìƒì„¸

```yaml
# EKS ìµœì í™” êµ¬ì„±
Cluster:
  name: sesacthon
  version: 1.28
  
NodeGroups:
  - name: api-services
    instanceType: t3.small
    desiredCapacity: 2
    minSize: 1
    maxSize: 3
    labels:
      workload: api
  
FargateProfiles:
  - name: workers
    selectors:
      - namespace: waste
        labels:
          app: celery-worker
      - namespace: recycling
        labels:
          app: worker

Add-ons:
  - ArgoCD (GitOps)
  - Ingress-Nginx (ë˜ëŠ” NLB)
  - Cert-manager (SSL)
  - Metrics Server (Auto Scaling)
  - Cluster Autoscaler

ë¹„ìš©: $136/ì›”
```

---

## ğŸ“‹ êµ¬ì¶• ì²´í¬ë¦¬ìŠ¤íŠ¸ (ê²½í—˜ììš©)

### Day 1: ì¸í”„ë¼ (4ì‹œê°„)

```bash
# 1. EKS ìƒì„± (30ë¶„)
eksctl create cluster -f cluster.yaml

# 2. ArgoCD (30ë¶„)
kubectl create ns argocd
kubectl apply -n argocd -f argocd-install.yaml

# 3. Ingress (30ë¶„)
helm install nginx-ingress ingress-nginx/ingress-nginx

# 4. Cert-manager (20ë¶„)
kubectl apply -f cert-manager.yaml

# 5. Monitoring (1ì‹œê°„)
helm install prometheus prometheus-community/kube-prometheus-stack

# 6. Cluster Autoscaler (20ë¶„)
kubectl apply -f cluster-autoscaler.yaml

# 7. ê²€ì¦ (30ë¶„)
kubectl get nodes
kubectl get pods -A
```

### Day 2: Helm Charts (4ì‹œê°„)

```bash
# ì„œë¹„ìŠ¤ë³„ Chart ì‘ì„± (ê° 30ë¶„)
- charts/auth
- charts/users
- charts/waste (+ worker)
- charts/recycling
- charts/locations

# ArgoCD Application ë“±ë¡ (1ì‹œê°„)
kubectl apply -f argocd/applications/
```

### Day 3: í…ŒìŠ¤íŠ¸ (2ì‹œê°„)

```bash
# 1. í—¬ìŠ¤ ì²´í¬
# 2. Auto Scaling í…ŒìŠ¤íŠ¸
# 3. Rolling Update í…ŒìŠ¤íŠ¸
# 4. Rollback í…ŒìŠ¤íŠ¸
```

**ì´: 10ì‹œê°„ (1.5ì¼)**

---

## ğŸ“ ìµœì¢… ì¡°ì–¸

### K8s ê²½í—˜ìë¼ë©´...

```
âœ… EKS + ArgoCD ì¶”ì²œ!

ë‹¨, ì¡°ê±´:
1. Docker Composeë¥¼ ë¨¼ì € ì™„ì„±
2. EKSëŠ” "ë³´ë„ˆìŠ¤" ê°œë…
3. í•´ì»¤í†¤ D-3ì— ì•ˆì •ì„± ê²€ì¦
4. ë¶ˆì•ˆí•˜ë©´ Dockerë¡œ ë³µê·€

ì „ëµ:
â”œâ”€ Primary: Docker Compose (ì•ˆì „)
â”œâ”€ Secondary: EKS (ë„ì „)
â””â”€ ì„ íƒ: í•´ì»¤í†¤ D-1ì— ê²°ì •

ë¹„ìš©:
â””â”€ ì›” $37 ì¶”ê°€ (ê°ë‹¹ ê°€ëŠ¥)

â†’ ë„ì „í•´ë³¼ ë§Œí•œ ê°€ì¹˜ ìˆìŒ!
```

### ì˜ˆì‚°ì´ ì •ë§ íƒ€ì´íŠ¸í•˜ë©´

```
Docker Compose ì¶”ì²œ

í•˜ì§€ë§Œ ë°œí‘œì—ì„œ:
"ì‹œê°„ê³¼ ì˜ˆì‚° ì œì•½ìœ¼ë¡œ Docker Composeë¥¼ ì„ íƒí–ˆì§€ë§Œ,
Helm Chartsë¥¼ ì‘ì„±í•´ë‘ì–´ ì–¸ì œë“  K8së¡œ ì „í™˜ ê°€ëŠ¥í•˜ë„ë¡
ì„¤ê³„í–ˆìŠµë‹ˆë‹¤."

â†’ í•©ë¦¬ì„± ì–´í•„!
```

---

## ğŸ“š ê´€ë ¨ ë¬¸ì„œ

- [ë°°í¬ ì˜µì…˜ ë¹„êµ](deployment-options-comparison.md)
- [GitOps ë©€í‹°ì„œë¹„ìŠ¤](gitops-multi-service.md)
- [ë§ˆì´í¬ë¡œì„œë¹„ìŠ¤ ì•„í‚¤í…ì²˜](microservices-architecture.md)

---

**ì‘ì„±ì¼**: 2025-10-30  
**ëŒ€ìƒ**: K8s ê²½í—˜ì  
**ê²°ë¡ **: âœ… EKS ìµœì í™” êµ¬ì„± ê³ ë ¤ ê°€ëŠ¥ ($136/ì›”, 1.5ì¼ êµ¬ì¶•)  
**ì¡°ê±´**: Docker Compose ë°±ì—… í•„ìˆ˜

