# ğŸ“‹ v0.7.0 ì™„ë£Œ ê°€ì´ë“œ (14-Node Production)

> **ë²„ì „**: v0.7.0  
> **ë‚ ì§œ**: 2025-11-09  
> **ë§ˆì¼ìŠ¤í†¤**: 14-Node í™•ì¥ + GitOps ì™„ì „ ìë™í™”

---

## ğŸ¯ ë²„ì „ ê°œìš”

### v0.7.0 ì£¼ìš” ë³€ê²½ ì‚¬í•­

```yaml
ì•„í‚¤í…ì²˜:
  âœ… 13-Node â†’ 14-Node í™•ì¥
  âœ… Phase 3 API ë…¸ë“œ ì¶”ê°€ (info, chat)
  âœ… Phase 4 Worker ë…¸ë“œ ì¶”ê°€ (storage, ai)
  âœ… Phase 4 Infrastructure ì¶”ê°€ (rabbitmq, monitoring)

GitOps:
  âœ… Terraform + Atlantis í†µí•©
  âœ… ArgoCD + Hooks êµ¬í˜„
  âœ… GitHub Actions ê°„ì†Œí™”
  âœ… ApplicationSet ê¸°ë°˜ ë©€í‹° ì„œë¹„ìŠ¤ ê´€ë¦¬

ë¬¸ì„œ:
  âœ… 92ê°œ â†’ 76ê°œ ì •ë¦¬ (16ê°œ ì‚­ì œ)
  âœ… 14-Node ê¸°ì¤€ í†µì¼
  âœ… ì¤‘ë³µ ë¬¸ì„œ ì œê±°
  âœ… ë£¨íŠ¸ README.md ìƒì„±

ëª¨ë‹ˆí„°ë§:
  âœ… 14-Node ServiceMonitor ì¶”ê°€
  âœ… Prometheus Rules í™•ì¥ (26ê°œ)
  âœ… Grafana Dashboard ì—…ë°ì´íŠ¸
  âœ… Atlantis + Prometheus Ingress
```

---

## ğŸ“Š ë²„ì „ ë¹„êµ

### v0.6.0 vs v0.7.0

| í•­ëª© | v0.6.0 (13-Node) | v0.7.0 (14-Node) | ë³€ê²½ |
|------|------------------|------------------|------|
| **ë…¸ë“œ ìˆ˜** | 13ê°œ | 14ê°œ | +1 |
| **vCPU** | 26 | 30 | +4 |
| **Memory** | 64 GB | 22 GB | ìµœì í™” |
| **API ì„œë¹„ìŠ¤** | 6ê°œ | 7ê°œ | +1 (info, chat ë¶„ë¦¬) |
| **Worker** | 2ê°œ | 2ê°œ | ë™ì¼ |
| **Infrastructure** | 4ê°œ (Masterì— ë°°í¬) | 4ê°œ (ì „ìš© ë…¸ë“œ) | ë…ë¦½í™” |
| **GitOps** | ìˆ˜ë™ | ì™„ì „ ìë™í™” | â­ |
| **ë¬¸ì„œ ìˆ˜** | 92ê°œ | 76ê°œ | -16 (ì •ë¦¬) |

---

## âœ… ì™„ë£Œëœ ì‘ì—…

### 1ï¸âƒ£ ì¸í”„ë¼ í™•ì¥ (14-Node)

#### Terraform

```yaml
ë³€ê²½ íŒŒì¼:
  âœ… terraform/main.tf
  âœ… terraform/outputs.tf
  âœ… terraform/templates/hosts.tpl

ì¶”ê°€ ëª¨ë“ˆ:
  âœ… module.api_info
  âœ… module.api_chat
  âœ… module.worker_storage
  âœ… module.worker_ai
  âœ… module.rabbitmq
  âœ… module.monitoring

ìƒíƒœ:
  âœ… vCPU í• ë‹¹ëŸ‰ 32ê°œë¡œ ì¦ê°€
  âœ… 14ê°œ ì¸ìŠ¤í„´ìŠ¤ í”„ë¡œë¹„ì €ë‹
  âœ… Security Groups í™•ì¥
  âœ… IAM Roles ì—…ë°ì´íŠ¸
```

#### Ansible

```yaml
ë³€ê²½ íŒŒì¼:
  âœ… ansible/playbooks/label-nodes.yml
  âœ… ansible/inventory/hosts.ini (Terraform ìƒì„±)

ì¶”ê°€ ë¼ë²¨:
  âœ… Phase 3 API ë…¸ë“œ (info, chat)
  âœ… Phase 4 Worker ë…¸ë“œ (storage, ai)
  âœ… Phase 4 Infrastructure (rabbitmq, monitoring)

ìƒíƒœ:
  âœ… 14ê°œ ë…¸ë“œ ìë™ ë¼ë²¨ë§
  âœ… domain, workload, phase íƒœê·¸
  âœ… Taint ì„¤ì • (Infrastructure)
```

### 2ï¸âƒ£ GitOps ì™„ì „ ìë™í™”

#### Atlantis

```yaml
ì„¤ì • íŒŒì¼:
  âœ… atlantis.yaml (Terraform ì›Œí¬í”Œë¡œìš°)
  âœ… k8s/atlantis/atlantis-deployment.yaml

ê¸°ëŠ¥:
  âœ… PR ê¸°ë°˜ Terraform plan
  âœ… ìë™ apply ì‹¤í–‰
  âœ… ConfigMapìœ¼ë¡œ Outputs ì €ì¥
  âœ… ArgoCD ìë™ íŠ¸ë¦¬ê±°

ë°°í¬ ìœ„ì¹˜:
  âœ… k8s-monitoring ë…¸ë“œ
  âœ… Ingress ì„¤ì • (atlantis.growbin.app)
```

#### ArgoCD

```yaml
ì„¤ì • íŒŒì¼:
  âœ… argocd/application-14nodes-with-hooks.yaml
  âœ… argocd/applications/ecoeco-14nodes-appset.yaml

Hooks:
  âœ… PreSync: ansible-bootstrap (site.yml)
  âœ… PostSync: node-labeling (label-nodes.yml)

ApplicationSet:
  âœ… ecoeco-api-services-14nodes (7ê°œ API)
  âœ… ecoeco-worker-services-14nodes (2ê°œ Worker)
  âœ… ecoeco-infrastructure-14nodes (Infrastructure)
  âœ… ecoeco-monitoring-config-14nodes (Monitoring)

ìƒíƒœ:
  âœ… Sync Wave ê¸°ë°˜ ìˆœì°¨ ë°°í¬
  âœ… ìë™ ë¼ë²¨ ì ìš©
  âœ… Health Check í†µí•©
```

#### GitHub Actions

```yaml
ë³€ê²½ íŒŒì¼:
  âœ… .github/workflows/infrastructure-phase3.yml (ê°„ì†Œí™”)

ê¸°ëŠ¥:
  âœ… Atlantis íŠ¸ë¦¬ê±° (PR ê¸°ë°˜)
  âœ… ArgoCD ìƒíƒœ í™•ì¸
  âœ… ë°°í¬ ì•Œë¦¼

ìƒíƒœ:
  âœ… ìˆ˜ë™ ìŠ¤í¬ë¦½íŠ¸ ìµœì†Œí™”
  âœ… GitOps ì¤‘ì‹¬ ì›Œí¬í”Œë¡œìš°
```

### 3ï¸âƒ£ Kubernetes ë¦¬ì†ŒìŠ¤

#### Helm Charts

```yaml
ë³€ê²½ íŒŒì¼:
  âœ… charts/ecoeco-backend/values-14nodes.yaml

ì¶”ê°€ ì„œë¹„ìŠ¤:
  âœ… info API
  âœ… chat API
  âœ… storage Worker
  âœ… ai Worker

Redis ì „ëµ:
  âœ… Auth: JWT Blacklist
  âœ… Others: Cache-Aside

HPA ì„¤ì •:
  âœ… API: 1-3 replicas
  âœ… Worker: 1-5 replicas
```

#### Monitoring

```yaml
ë³€ê²½ íŒŒì¼:
  âœ… k8s/monitoring/servicemonitors-14nodes.yaml (18ê°œ)
  âœ… k8s/monitoring/prometheus-rules-14nodes.yaml (26 Alert + 8 Recording)

ì¶”ê°€ ë©”íŠ¸ë¦­:
  âœ… info, chat API
  âœ… storage, ai Worker
  âœ… RabbitMQ, Prometheus ìì²´

ìƒíƒœ:
  âœ… ìë™ Service ë°œê²¬
  âœ… Label ê¸°ë°˜ ë©”íŠ¸ë¦­ ìˆ˜ì§‘
  âœ… Relabeling ì„¤ì •
```

#### Ingress

```yaml
ë³€ê²½ íŒŒì¼:
  âœ… k8s/ingress/14-nodes-ingress.yaml

í†µí•© ì„œë¹„ìŠ¤:
  âœ… api.growbin.app (7 API)
  âœ… atlantis.growbin.app
  âœ… grafana.growbin.app
  âœ… prometheus.growbin.app

ìƒíƒœ:
  âœ… ë‹¨ì¼ ALBë¡œ í†µí•©
  âœ… ACM Certificate ì„¤ì •
  âœ… Health Check ê²½ë¡œ ì„¤ì •
```

### 4ï¸âƒ£ ë¬¸ì„œ ì •ë¦¬

#### ì‚­ì œëœ ë¬¸ì„œ (16ê°œ)

```yaml
architecture/:
  âŒ 13-nodes-architecture.md
  âŒ microservices-13nodes.md
  âŒ celery-architecture.md
  âŒ database-architecture.md
  âŒ worker-layer.md
  âŒ wal-domain-combined.md

deployment/:
  âŒ phase1/2/3-gitops-completion-report.md (3ê°œ)
  âŒ 14-node-expansion-status.md
  âŒ auto-rebuild-14node-check.md
  âŒ destroy-cleanup-14node-check.md
  âŒ destroy-cloudfront-improvement.md
  âŒ DEPLOYMENT_SETUP.md
  âŒ ghcr-setup.md
  âŒ gitops-argocd-helm.md
  âŒ atlantis-setup-guide.md
  âŒ argocd-files-comparison.md
  âŒ gitops-vs-scripts-role.md

guides/:
  âŒ deployment-13nodes.md
  âŒ DEPLOYMENT_METHODS.md
  âŒ infrastructure-rebuild.md
  âŒ SETUP_CHECKLIST.md

development/:
  âŒ V0.6.0_COMPLETION_GUIDE.md (ì¤‘ë³µ)
```

#### ìƒì„±ëœ ë¬¸ì„œ

```yaml
ë£¨íŠ¸:
  âœ… README.md (í”„ë¡œì íŠ¸ ë©”ì¸ ë¬¸ì„œ)

docs/:
  âœ… cleanup-report-2025-11-09.md (ì •ë¦¬ ë³´ê³ ì„œ)

docs/deployment/:
  âœ… 14-node-completion-summary.md
  âœ… 14-node-progress-tracking.md
  âœ… argocd-hooks-setup-guide.md
  âœ… atlantis-deployment-location.md
  âœ… ingress-monitoring-verification.md

docs/troubleshooting/:
  âœ… ANSIBLE_SSH_TIMEOUT.md

docs/development/:
  âœ… 03-V0.7.0_COMPLETION_GUIDE.md (ì´ ë¬¸ì„œ)
```

---

## ğŸš€ ë°°í¬ ê°€ì´ë“œ (v0.7.0)

### ì „ì²´ ìë™ ë°°í¬

```bash
# 1. vCPU í• ë‹¹ëŸ‰ í™•ì¸
aws service-quotas get-service-quota \
    --service-code ec2 \
    --quota-code L-1216C47A \
    --region ap-northeast-2

# 2. ì™„ì „ ìë™ ë°°í¬
./scripts/cluster/auto-rebuild.sh

# ì†Œìš” ì‹œê°„: 40-60ë¶„
```

### ë‹¨ê³„ë³„ ë°°í¬

```bash
# 1. Terraform (15-20ë¶„)
cd terraform
terraform apply -auto-approve

# 2. Ansible (15-20ë¶„)
cd ../ansible
terraform output -raw ansible_inventory > inventory/hosts.ini
ansible-playbook playbooks/site.yml
ansible-playbook playbooks/label-nodes.yml

# 3. ArgoCD (5-10ë¶„)
kubectl apply -f argocd/applications/ecoeco-14nodes-appset.yaml

# 4. ìƒíƒœ í™•ì¸
kubectl get nodes -o wide
argocd app list
```

---

## ğŸ“Š ì„±ëŠ¥ ì§€í‘œ

### ë¦¬ì†ŒìŠ¤ ì‚¬ìš©ëŸ‰

```yaml
ë…¸ë“œ:
  Total: 14ê°œ
  Master: 1ê°œ (t3.large, 2 vCPU, 8GB)
  API: 7ê°œ (t3.micro/small, 14 vCPU, 9GB)
  Worker: 2ê°œ (t3.small, 4 vCPU, 4GB)
  Infra: 4ê°œ (t3.small, 8 vCPU, 8GB)

ì´í•©:
  vCPU: 30ê°œ
  Memory: 22 GB
  Cost: ~$200/month (ì˜ˆìƒ)
```

### ë°°í¬ ì‹œê°„

```yaml
Terraform apply: 15-20ë¶„
  - CloudFront: 10-15ë¶„ (ê°€ì¥ ì˜¤ë˜ ê±¸ë¦¼)
  - EC2 ì¸ìŠ¤í„´ìŠ¤: 2-3ë¶„
  - ê¸°íƒ€ ë¦¬ì†ŒìŠ¤: 2-3ë¶„

Ansible playbook: 15-20ë¶„
  - site.yml: 12-15ë¶„
  - label-nodes.yml: 2-3ë¶„

ArgoCD sync: 5-10ë¶„
  - ApplicationSet ìƒì„±: 1-2ë¶„
  - ì• í”Œë¦¬ì¼€ì´ì…˜ ë°°í¬: 3-8ë¶„

ì´ ì†Œìš” ì‹œê°„: 40-60ë¶„
```

---

## ğŸ› ì•Œë ¤ì§„ ì´ìŠˆ

### í•´ê²°ëœ ì´ìŠˆ

```yaml
1. Ansible SSH íƒ€ì„ì•„ì›ƒ:
   ì›ì¸: Terraform outputê³¼ Inventory IP ë¶ˆì¼ì¹˜
   í•´ê²°: Inventory ì¬ìƒì„± ë¡œì§ ì¶”ê°€
   ë¬¸ì„œ: docs/troubleshooting/ANSIBLE_SSH_TIMEOUT.md

2. CloudFront ì‚­ì œ ì§€ì—°:
   ì›ì¸: InProgress ìƒíƒœì—ì„œ ì‚­ì œ ì‹œë„
   í•´ê²°: Status í™•ì¸ í›„ ì‚­ì œ
   ë¬¸ì„œ: docs/troubleshooting/CLOUDFRONT_ACM_CERTIFICATE_STUCK.md

3. VPC ì‚­ì œ ì§€ì—°:
   ì›ì¸: NAT Gateway, ENI ì˜ì¡´ì„±
   í•´ê²°: ìˆœì°¨ ì‚­ì œ + ëŒ€ê¸° ë¡œì§
   ë¬¸ì„œ: docs/troubleshooting/VPC_DELETION_DELAY.md
```

### ë‚¨ì€ ì´ìŠˆ

```yaml
1. auto-rebuild.sh 14-Node ë¯¸ì§€ì›:
   ìƒíƒœ: 8-Nodeë§Œ ì§€ì›
   ê³„íš: v0.7.1ì—ì„œ ìˆ˜ì •

2. API ì• í”Œë¦¬ì¼€ì´ì…˜ ë¯¸ê°œë°œ:
   ìƒíƒœ: ì¸í”„ë¼ë§Œ ì¤€ë¹„
   ê³„íš: v0.8.0ì—ì„œ ê°œë°œ
```

---

## ğŸ“ ì²´í¬ë¦¬ìŠ¤íŠ¸

### ì¸í”„ë¼

- [x] âœ… 14-Node Terraform ëª¨ë“ˆ
- [x] âœ… Ansible playbooks (14-Node)
- [x] âœ… Kubernetes Labels & Annotations
- [x] âœ… Security Groups í™•ì¥
- [x] âœ… IAM Roles ì—…ë°ì´íŠ¸

### GitOps

- [x] âœ… Atlantis ì„¤ì •
- [x] âœ… ArgoCD Hooks
- [x] âœ… ApplicationSet (14-Node)
- [x] âœ… GitHub Actions ê°„ì†Œí™”
- [x] âœ… Helm Charts (14-Node)

### Monitoring

- [x] âœ… ServiceMonitors (18ê°œ)
- [x] âœ… Prometheus Rules (26 Alert + 8 Recording)
- [x] âœ… Grafana Dashboard
- [x] âœ… Ingress (Monitoring í¬í•¨)

### ë¬¸ì„œ

- [x] âœ… ë£¨íŠ¸ README.md ìƒì„±
- [x] âœ… docs/README.md ì—…ë°ì´íŠ¸
- [x] âœ… 16ê°œ ë¬¸ì„œ ì‚­ì œ (92â†’76ê°œ)
- [x] âœ… 14-Node ê¸°ì¤€ í†µì¼
- [x] âœ… Troubleshooting ë¬¸ì„œ ì¶”ê°€

### ìŠ¤í¬ë¦½íŠ¸

- [ ] â³ auto-rebuild.sh 14-Node ì§€ì›
- [x] âœ… destroy-with-cleanup.sh ê°œì„ 
- [x] âœ… manual-cleanup-cloudfront-acm.sh

---

## ğŸ¯ ë‹¤ìŒ ë‹¨ê³„ (v0.8.0)

### ê³„íš

```yaml
API ê°œë°œ:
  - FastAPI ì• í”Œë¦¬ì¼€ì´ì…˜ êµ¬í˜„
  - PostgreSQL ìŠ¤í‚¤ë§ˆ ì ìš©
  - Redis Cache-Aside êµ¬í˜„
  - JWT Blacklist êµ¬í˜„

Worker ê°œë°œ:
  - Storage Worker (S3 ì—…ë¡œë“œ)
  - AI Worker (GPT Vision)
  - SQLite WAL êµ¬í˜„
  - PostgreSQL ë™ê¸°í™”

í…ŒìŠ¤íŠ¸:
  - End-to-End í…ŒìŠ¤íŠ¸
  - ë¶€í•˜ í…ŒìŠ¤íŠ¸
  - ì¥ì•  ë³µêµ¬ í…ŒìŠ¤íŠ¸

ëª¨ë‹ˆí„°ë§:
  - AlertManager ì—°ë™
  - Slack/Email ì•Œë¦¼
  - Custom Dashboard
```

---

## ğŸ”— ê´€ë ¨ ë¬¸ì„œ

- [14-Node Completion Summary](../deployment/14-node-completion-summary.md)
- [14-Node Progress Tracking](../deployment/14-node-progress-tracking.md)
- [GitOps Automation Design](../deployment/gitops-automation-design.md)
- [ArgoCD Hooks Setup](../deployment/argocd-hooks-setup-guide.md)
- [Cleanup Report 2025-11-09](../cleanup-report-2025-11-09.md)

---

**ì‘ì„±ì¼**: 2025-11-09  
**ë²„ì „**: v0.7.0  
**ìƒíƒœ**: âœ… ì™„ë£Œ  
**ë‹¤ìŒ ë²„ì „**: v0.8.0 (API/Worker ê°œë°œ)

